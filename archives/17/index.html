<!DOCTYPE html>
<html lang="ko">
<head>
    <meta charset="utf-8">

<meta name="generator" content="Hexo 3.9.0">

<meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1">

<title>92Hz</title>

<!-- For SEO -->
<link rel="canonical" href="https://jongmin92.github.io/archives/17/">


    <meta property="og:type" content="website">
<meta property="og:title" content="92Hz">
<meta property="og:url" content="https://jongmin92.github.io/archives/17/index.html">
<meta property="og:site_name" content="92Hz">
<meta property="og:locale" content="ko">
<meta property="og:image" content="https://jongmin92.github.io/images/og_image.png">
<meta name="twitter:card" content="summary">
<meta name="twitter:title" content="92Hz">
<meta name="twitter:image" content="https://jongmin92.github.io/images/og_image.png">





<link rel="alternative" href="rss2.xml" title="92Hz" type="application/atom+xml">



<link rel="icon" href="/images/favicon.png">


<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bulma@0.7.2/css/bulma.css">
<link rel="stylesheet" href="https://use.fontawesome.com/releases/v5.4.1/css/all.css">
<link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Ubuntu:400,600|Source+Code+Pro">
<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/highlight.js@9.12.0/styles/atom-one-light.css">


    
    
<style>body>.footer,body>.navbar,body>.section{opacity:0}</style>

    
    
<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/lightgallery@1.6.8/dist/css/lightgallery.min.css">
<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/justifiedGallery@3.7.0/dist/css/justifiedGallery.min.css">

    
    
<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/outdatedbrowser@1.1.5/outdatedbrowser/outdatedbrowser.min.css">

    
    
    
    
<link rel="stylesheet" href="/css/back-to-top.css">

    
    <script async src="https://www.googletagmanager.com/gtag/js?id=UA-90389042-1"></script>
<script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-90389042-1');
</script>

    
    
    
    
    
    <link rel="stylesheet" href="/css/progressbar.css">
<script src="https://cdn.jsdelivr.net/npm/pace-js@1.0.2/pace.min.js"></script>
    
    
    


<link rel="stylesheet" href="/css/style.css">
</head>
<body class="is-2-column">
    <nav class="navbar navbar-main">
    <div class="container">
        <div class="navbar-brand is-flex-center">
            <a class="navbar-item navbar-logo" href="/">
            
                <img src="/images/logo.png" alt="92Hz" height="28">
            
            </a>
        </div>
        <div class="navbar-menu">
            
            <div class="navbar-start">
                
                <a class="navbar-item" href="/">Home</a>
                
                <a class="navbar-item" href="/archives">Archives</a>
                
                <a class="navbar-item" href="/categories">Categories</a>
                
                <a class="navbar-item" href="/tags">Tags</a>
                
                <a class="navbar-item" href="/about">About</a>
                
            </div>
            
            <div class="navbar-end">
                
                    
                    <a class="navbar-item" target="_blank" rel="external nofollow noopener noreferrer" title="Download on GitHub" href="https://github.com/ppoffice/hexo-theme-icarus">
                        
                        <i class="fab fa-github"></i>
                        
                    </a>
                    
                
                
                
                <a class="navbar-item search" title="검색" href="javascript:;">
                    <i class="fas fa-search"></i>
                </a>
                
            </div>
        </div>
    </div>
</nav>
    
    <section class="section">
        <div class="container">
            <div class="columns">
                <div class="column is-8-tablet is-8-desktop is-9-widescreen has-order-2 column-main">
    
<div class="card">
    
    <div class="card-content article ">
        
        <div class="level article-meta is-size-7 is-uppercase is-mobile is-overflow-x-auto">
            <div class="level-left">
                <time class="level-item has-text-grey" datetime="2017-05-27T15:00:00.000Z">2017-05-28</time>
                
                <div class="level-item">
                <a class="has-link-grey -link" href="/categories/Project/">Project</a>&nbsp;/&nbsp;<a class="has-link-grey -link" href="/categories/Project/Emily/">Emily</a>
                </div>
                
                
                <span class="level-item has-text-grey">
                    
                    
                    12분 읽기 (대략 1817 단어)
                </span>
                
                
            </div>
        </div>
        
        <h1 class="title is-size-3 is-size-4-mobile has-text-weight-normal">
            
                <a class="has-link-black-ter" href="/2017/05/28/Emily/5-aws-lambda/">5) AWS Lambda 사용하기</a>
            
        </h1>
        <div class="content">
            <h2 id="index"><a href="#Index" class="headerlink" title="Index"></a>Index</h2><ol>
<li><a href="#1">AWS Lambda란?</a></li>
<li><a href="#2">CloudWatch와 Lambda 구성하기</a></li>
<li><a href="#3">정리하며</a></li>
</ol>
<hr>
<p><a href="http://localhost:4000/2017/05/26/Emily/4-crawling/" rel="external nofollow noopener noreferrer" target="_blank">저번 포스팅</a>에서 작성한 <strong>학식 메뉴 크롤링(학식 메뉴를 크롤링해 DB에 저장)</strong> 코드를 <strong><code>AWS Labmda</code></strong>를 사용해 일주일에 한번씩 실행되도록 스케쥴링을 해보겠습니다.</p>
<blockquote>
<p>AWS(아마존 웹 서비스)에 대한 기본적인 내용은 생략합니다.</p>
</blockquote>
<p><span id="1"></span></p>
<h2 id="aws-lambda란"><a href="#AWS-Lambda란" class="headerlink" title="AWS Lambda란?"></a>AWS Lambda란?</h2><p>어떠한 이벤트에 따라 Cron 프로세스를 구성하는데에는 다양한 방법이 존재합니다. 서버 인스턴스를 띄워놓고 일정 시간에 이벤트를 발생시키는 것이 일반적인 방법 중 하나이지만 이러한 방법으로 구성할 시에는 해당 시간에 Event를 발생시키는 일을 제외하고는 서버 인스턴스를 낭비하게 됩니다.</p>
<p><a href="https://aws.amazon.com/ko/lambda/details/" rel="external nofollow noopener noreferrer" target="_blank">AWS Lambda</a>는 <strong>이벤트에 응답하여 코드를 실행</strong>하고 자동으로 기본 컴퓨팅 리소스를 관리하는 서버 없는 컴퓨팅 서비스입니다. AWS Lambda를 사용하여 커스텀 로직으로 다른 AWS 서비스를 확장하거나, AWS 규모, 성능 및 보안으로 작동하는 자체 백엔드 서비스를 만들 수 있습니다. AWS Lambda는 Amazon S3 버킷의 객체에 대한 변경 또는 Amazon DynamoDB의 테이블 업데이트와 같은 <strong>다양한 이벤트에 대한 응답으로 코드를 자동 실행</strong>할 수 있습니다.</p>
<p>AWS Lambda는 코드가 실행되지 않을 때는 요금이 부과되지 않습니다. 즉, 서버 인스턴스를 계속 띄워놓는 것과 비교했을 때 더 저렴합니다. AWS Lambda의 자세한 요금 정책은 <a href="https://aws.amazon.com/ko/lambda/pricing/" rel="external nofollow noopener noreferrer" target="_blank">AWS 홈페이지</a>에서 확인 가능합니다. (Lambda 함수가 다른 AWS 서비스를 사용하거나 데이터를 전송하는 경우 추가 요금이 부과될 수 있으므로 필히 확인바랍니다.)</p>
<hr>
<p><span id="2"></span></p>
<h2 id="cloudwatch와-lambda-구성하기"><a href="#CloudWatch와-Lambda-구성하기" class="headerlink" title="CloudWatch와 Lambda 구성하기"></a>CloudWatch와 Lambda 구성하기</h2><p>1) AWS에 로그인 후 Lambda 서비스를 클릭합니다.</p>
<p><img src="/images/post/2017-05-28/lambda_1.png" alt="Lambda Function 생성하기 - 1"></p>
<p>2) 저와 같이 이미 생성한 Lambda 함수가 있는 경우는 아래와 같이 <strong>Create a Lambda Function</strong> 버튼을 클릭하고 처음으로 Lambda 함수를 생성하는 경우는 <strong>Get Started Now</strong> 버튼을 클릭합니다.</p>
<p><img src="/images/post/2017-05-28/lambda_2.png" alt="Lambda Function 생성하기 - 2"></p>
<p>3) Blueprint는 자주 사용되어지는 미리 준비된 Lambda 함수의 환경을 제공합니다. 저희는 <strong>Blank Function</strong>을 선택해서 직접 trigger(Event)와 환경을 설정합니다.</p>
<p><img src="/images/post/2017-05-28/lambda_3.png" alt="Lambda Function 생성하기 - 3"></p>
<p>4) Lambda를 일정 시간 규칙에 맞게 호출할 것이기 때문에 <strong>CloudWatch Events - Schedule</strong>를 선택합니다. <a href="https://aws.amazon.com/ko/cloudwatch/" rel="external nofollow noopener noreferrer" target="_blank">CloudWatch</a>는 AWS에서 실행되는 애플리케이션을 위한 모니터링 서비스 뿐만 아니라 Schedule도 제공합니다.<br>(Lambda를 실행시키기 위한 trigger로 다양한 방법이 제공됩니다. 한가지 예시로 S3의 특정 Bucket에 이미지 파일이 업로드 될때마다 ReSizing을 하고싶다면 trigger로 S3를 설정한 후 Bucket과 Event type(Delete, Put, Post, Copy)을 설정하여 해당 Lambda를 수행하도록 할 수 있습니다.)</p>
<p><img src="/images/post/2017-05-28/lambda_4.png" alt="Lambda Function 생성하기 - 4"></p>
<p>5) CloudWatch Events -  Schedule의 내용을 작성합니다. <strong>Rule name</strong>과 <strong>Rule description</strong>에는 해당 Schedule의 이름과 설명을 적고, <strong>Schedule expression</strong>에는 Event를 발생시키고자 하는 주기에 맞게 Cron 식을 작성합니다.<br>Schedule expression에 작성한 Cron 식에 따라 Event가 발생하는 시간이 달라집니다. Cron 식을 처음 접하시는 분은 <a href="http://docs.aws.amazon.com/ko_kr/AmazonCloudWatch/latest/events/ScheduledEvents.html" rel="external nofollow noopener noreferrer" target="_blank">AWS 홈페이지1</a>, <a href="http://docs.aws.amazon.com/ko_kr/lambda/latest/dg/tutorial-scheduled-events-schedule-expressions.html" rel="external nofollow noopener noreferrer" target="_blank">AWS 홈페이지2</a>를 참고해서 Cron 식을 작성합니다.<br><strong>단, Cron 식에 사용되는 시간은 UTC를 기준으로 하기 때문에 유의해야 합니다. 제가 작성한 cron 식 <code>(0 13 ? * SUN *)</code>을 기준으로 하면 <code>매주 일요일 22(13+9)시</code>에 이벤트가 발생합니다.</strong></p>
<p><img src="/images/post/2017-05-28/lambda_5.png" alt="Lambda Function 생성하기 - 5"></p>
<p>6-1) 다음과 같이 Lambda function의 <strong>이름, 설명, 실행환경</strong>(포스팅 기준 Node.js 6.10 이 최신 버전입니다.) 을 작성합니다.</p>
<p>6-2) 다음으로 CloudWatch Events에 의해서 실행될 <strong>코드</strong>를 기재해야합니다. 코드를 기재하는 방식은 <strong>직접 작성, .ZIP 파일로 압축, S3를 이용</strong>하는 3가지 방식중 하나로 진행됩니다.<br>만약 작성한 코드가 aws-sdk를 제외한 외부 라이브러리를 사용하고 있다면 <strong>코드와 함께 라이브러리 파일(node_modules)을 압축</strong>하여 .ZIP 파일을 업로드 해야합니다.</p>
<p>6-3) 기존에 작성했던 코드에서 수정이 필요합니다. Lambda function의 코드가 에러없이 잘 완료되었는지 <strong>callback</strong>을 통해 결과를 반환해야합니다. <a href="http://localhost:4000/2017/05/26/Emily/4-crawling/" rel="external nofollow noopener noreferrer" target="_blank">지난번에 작성했던 코드</a>는 다음과 같이 수정됩니다. (예시를 들기위해 간단하게 작성했을 뿐, 실제 DB에 Insert 하는 부분은 생략되어 있습니다.)<br>29, 30번째 줄과, 34번째 줄에 추가된 코드에 주의하셔야 합니다.</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br></pre></td><td class="code"><pre><span class="line">exports.handler = <span class="function">(<span class="params">event, context, callback</span>) =&gt;</span> &#123;</span><br><span class="line">    <span class="keyword">const</span> request = <span class="built_in">require</span>(<span class="string">'request'</span>);</span><br><span class="line">    <span class="keyword">const</span> cheerio = <span class="built_in">require</span>(<span class="string">'cheerio'</span>);</span><br><span class="line">    </span><br><span class="line">    <span class="keyword">const</span> url = <span class="string">"http://www.inu.ac.kr/com/cop/mainWork/foodList1.do?siteId=inu&amp;id=inu_050110010000&amp;command=week"</span>;</span><br><span class="line">    </span><br><span class="line">    request(url, (error, response, body) =&gt; &#123;</span><br><span class="line">      <span class="keyword">if</span> (error) <span class="keyword">throw</span> error;</span><br><span class="line">    </span><br><span class="line">      <span class="keyword">let</span> $ = cheerio.load(body);</span><br><span class="line">    </span><br><span class="line">      <span class="keyword">try</span> &#123;</span><br><span class="line">        <span class="keyword">let</span> krDay = <span class="string">''</span>;</span><br><span class="line">        <span class="keyword">let</span> corner = <span class="string">''</span>;</span><br><span class="line">        <span class="keyword">let</span> menu = <span class="string">''</span>;</span><br><span class="line">    </span><br><span class="line">        $(<span class="string">'table'</span>).find(<span class="string">'tr'</span>).each(<span class="function"><span class="keyword">function</span> (<span class="params">index, elem</span>) </span>&#123;</span><br><span class="line">          <span class="keyword">if</span> (index % <span class="number">6</span> === <span class="number">0</span>) &#123;</span><br><span class="line">            krDay = $(<span class="keyword">this</span>).find(<span class="string">'th'</span>).text().trim();</span><br><span class="line">    </span><br><span class="line">            <span class="built_in">console</span>.log(<span class="string">`<span class="subst">$&#123;krDay&#125;</span>`</span>);</span><br><span class="line">          &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">            corner = $(<span class="keyword">this</span>).find(<span class="string">'th'</span>).text().trim();</span><br><span class="line">            menu = $(<span class="keyword">this</span>).find(<span class="string">'th'</span>).next().text().trim();</span><br><span class="line">    </span><br><span class="line">            <span class="built_in">console</span>.log(<span class="string">`<span class="subst">$&#123;corner&#125;</span> -&gt; <span class="subst">$&#123;menu&#125;</span>`</span>);</span><br><span class="line">          &#125;</span><br><span class="line">          </span><br><span class="line">          callback(<span class="literal">null</span>);</span><br><span class="line">          context.succeed();</span><br><span class="line">        &#125;);</span><br><span class="line">      &#125; <span class="keyword">catch</span> (error) &#123;</span><br><span class="line">        <span class="built_in">console</span>.error(error);</span><br><span class="line">        callback(err);</span><br><span class="line">      &#125;</span><br><span class="line">    &#125;);</span><br><span class="line">&#125;;</span><br></pre></td></tr></table></figure>
<p><img src="/images/post/2017-05-28/lambda_6_1.png" alt="Lambda Function 생성하기 - 6"></p>
<p>6_4) 필요에 따라 환경변수(Environment variables)와 Advanced settings를 작성한 후 <strong>Role</strong>을 작성하고 다음단계로 넘어갑니다. (Handler에 index.handler 라고 작성했기 때문에 .ZIP파일로 압축할때 소스코드(.js)의 파일명은 index가 되어야 합니다)</p>
<p><img src="/images/post/2017-05-28/lambda_6_2.png" alt="Lambda Function 생성하기 - 6"></p>
<p>7) 지금까지 설정한 옵션을 확인하고 최종적으로 function을 생성합니다.</p>
<p><img src="/images/post/2017-05-28/lambda_7.png" alt="Lambda Function 생성하기 - 7"></p>
<p>8) 생성된 Lambda Function을 <strong>테스트</strong>할 수 있습니다. Actions -&gt; Configure test event를 통해 테스트를 위한 이벤트를 설정합니다. trigger(Event)로 CloudWatch Events - Schedule를 설정했기 때문에 event template 목록 중 <strong>Schedule Event</strong>를 선택합니다.</p>
<p><img src="/images/post/2017-05-28/lambda_8_1.png" alt="Lambda Function 테스트 - 1"><br><img src="/images/post/2017-05-28/lambda_8_2.png" alt="Lambda Function 테스트 - 2"></p>
<p>9) 테스트 후 CloudWatch의 <strong>로그</strong>를 통해서 lambda function 코드에서 출력했던 로그 및 실행결과를 확인할 수 있습니다.</p>
<p><img src="/images/post/2017-05-28/lambda_9_1.png" alt="Lambda Function 로그 확인 - 1"><br><img src="/images/post/2017-05-28/lambda_9_2.png" alt="Lambda Function 로그 확인 - 2"></p>
<hr>
<p><span id="3"></span></p>
<h2 id="정리하며"><a href="#정리하며" class="headerlink" title="정리하며"></a>정리하며</h2><p>지금까지 진행한 작업은 다음의 이미지 한장으로 정리가 가능합니다. 이번기회에 lambda를 처음 사용해봤지만 앞으로 개인프로젝트에도 실무에서도 자주 사용하게될 것 같습니다.</p>
<p><img src="/images/post/2017-05-28/cloudwatch_lambda.png" alt="AWS의 CloudWatch와 Lambda"></p>

        </div>
        
        
        
    </div>
</div>








    
<div class="card">
    
    <div class="card-content article ">
        
        <div class="level article-meta is-size-7 is-uppercase is-mobile is-overflow-x-auto">
            <div class="level-left">
                <time class="level-item has-text-grey" datetime="2017-05-25T15:00:00.000Z">2017-05-26</time>
                
                <div class="level-item">
                <a class="has-link-grey -link" href="/categories/Project/">Project</a>&nbsp;/&nbsp;<a class="has-link-grey -link" href="/categories/Project/Emily/">Emily</a>
                </div>
                
                
                <span class="level-item has-text-grey">
                    
                    
                    14분 읽기 (대략 2078 단어)
                </span>
                
                
            </div>
        </div>
        
        <h1 class="title is-size-3 is-size-4-mobile has-text-weight-normal">
            
                <a class="has-link-black-ter" href="/2017/05/26/Emily/4-crawling/">4) 학식 메뉴 크롤링 하기</a>
            
        </h1>
        <div class="content">
            <h2 id="index"><a href="#Index" class="headerlink" title="Index"></a>Index</h2><ol>
<li><a href="#1">크롤링이란?</a></li>
<li><a href="#2">Scraping - 데이터 가져오기</a></li>
<li><a href="#3">Parsing - 데이터 추출하기</a></li>
<li><a href="#4">크롤링 이후</a></li>
</ol>
<hr>
<p><a href="http://plus.kakao.com/home/@인천대학교-에밀리" rel="external nofollow noopener noreferrer" target="_blank">인천대학교-에밀리</a>에 처음 추가한 기능은 <strong>교내 식당의 메뉴를 알려주는 기능</strong>이였습니다. 학교 DB에 접근할 수 있는 권한이 없었기 때문에 <strong>하루마다 매일 갱신</strong>되는 식당의 메뉴를 알기 위해서는 <a href="http://www.inu.ac.kr/com/cop/mainWork/foodList1.do?siteId=inu&amp;id=inu_050110010000&amp;command=week" rel="external nofollow noopener noreferrer" target="_blank">학교 홈페이지</a>에서 데이터를 참조하는 방법밖에 없었습니다. 이를 해결하기 위해 <strong><code>크롤링</code></strong>에 대해 공부하고 구현했던 방법에 대해 포스팅하려 합니다.</p>
<blockquote>
<p>Node 버전은 <strong>6.6.0</strong>을 사용합니다.</p>
</blockquote>
<p><span id="1"></span></p>
<h2 id="크롤링이란"><a href="#크롤링이란" class="headerlink" title="크롤링이란?"></a>크롤링이란?</h2><p>우리가 흔히 부르는 <strong>크롤링(crawling)</strong>이란 <strong>스크래핑(scraping)</strong>이라고도 합니다. 즉 <strong>웹 페이지를 그대로 가져와 데이터를 추출해 내는 행위</strong>입니다. 크롤링 하는 소프트웨어를 크롤러(crawler)라고 부릅니다.</p>
<p>웹 크롤러(web crawler)는 조직적, 자동화된 방법으로 월드 와이드 웹(WWW)을 탐색하는 프로그램입니다. 검색 엔진과 같은 여러 사이트에서는 데이터의 최신 상태 유지를 위해 웹 크롤링을 합니다. 웹 크롤러는 대체로 방문한 사이트의 모든 페이지 복사본을 생성하는데 사용되며, 검색 엔진은 이렇게 생성된 페이지를 보다 빠른 검색을 위해 인덱싱합니다.</p>
<p>웹 크롤러는 시드(seeds)라고 불리는 URL 리스트에서부터 시작해서 페이지의 모든 하이퍼링크를 인식하여 URL 리스트를 갱신합니다. 갱신된 리스트를 재귀적으로 다시 방문합니다.</p>
<p>결국 <strong>웹 크롤러는 엄청난 분량의 웹문서를 사람이 직접 구별해서 모으는 일은 거의 불가능하기 때문에, 이를 자동으로 수행해 주는 것입니다.</strong></p>
<p>웹은 기본적으로 <strong>HTML</strong> 형태로 되어 있습니다. 아래와 같이 <strong><code>페이지 소스 보기</code></strong>를 통해 확인할 수 있습니다.</p>
<p><img src="/images/post/2017-05-26/html_structure.png" alt="페이지 소스 보기로 확인한 HTML 구조"></p>
<p>위와 같은 HTML의 형태를 분석해서 원하는 정보만을 뽑아오는 것을 <strong><code>웹 크롤링</code></strong>작업이라고 합니다.</p>
<p>웹 사이트의 데이터를 수집하는데 있어서 2가지 단계만 기억하면 됩니다. 일반적으로는 이 2가지 과정을 합쳐 크롤링이라고 부르지만, 각각의 단계는 명확히 구분됩니다.</p>
<p>1.<strong>Scraping</strong> : 데이터를 어떻게 가져올 것인가?</p>
<p>2.<strong>Parsing</strong> : 가져온 데이터를 어떻게 추출할 것인가?</p>
<hr>
<p><span id="2"></span></p>
<h2 id="scraping-데이터-가져오기"><a href="#Scraping-데이터-가져오기" class="headerlink" title="Scraping - 데이터 가져오기"></a>Scraping - 데이터 가져오기</h2><p>Javascript에서 웹 페이지 데이터를 가져오기 위해서 <a href="https://github.com/request/request" rel="external nofollow noopener noreferrer" target="_blank">request</a> 모듈을 사용합니다.</p>
<p>먼저 request 모듈을 설치합니다.<br><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">npm install request --save</span><br></pre></td></tr></table></figure></p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> request = <span class="built_in">require</span>(<span class="string">'request'</span>);</span><br><span class="line"></span><br><span class="line"><span class="keyword">const</span> url = <span class="string">"http://www.inu.ac.kr/com/cop/mainWork/foodList1.do?siteId=inu&amp;id=inu_050110010000&amp;command=week"</span>;</span><br><span class="line"></span><br><span class="line">request(url, (error, response, body) =&gt; &#123;</span><br><span class="line">  <span class="keyword">if</span> (error) <span class="keyword">throw</span> error;</span><br><span class="line"></span><br><span class="line">  <span class="built_in">console</span>.log(body);</span><br><span class="line">&#125;);</span><br></pre></td></tr></table></figure>
<p>위의 코드를 실행하면 아래와 같이 제가 얻고자 했던 학식 메뉴의 데이터를 포함한 웹 페이지 데이터를 가져옵니다. 해당 데이터는 크롬에서 <strong><code>보기 - 개발자 정보 - 소스 보기</code></strong>를 통해서도 확인이 가능합니다.</p>
<p><img src="/images/post/2017-05-26/scraping.png" alt="웹 페이지 Scraping"></p>
<hr>
<p><span id="3"></span></p>
<h2 id="parsing-데이터-추출하기"><a href="#Parsing-데이터-추출하기" class="headerlink" title="Parsing - 데이터 추출하기"></a>Parsing - 데이터 추출하기</h2><p>Scraping을 통해 가져온 데이터에서 원하는 데이터만을 추출(Parsing)하기 위해 <a href="https://github.com/cheeriojs/cheerio" rel="external nofollow noopener noreferrer" target="_blank">cheerio</a> 모듈을 사용합니다.</p>
<p>cheerio 모듈을 설치합니다.<br><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">npm install cheerio --save</span><br></pre></td></tr></table></figure></p>
<p>cherrio 모듈을 사용하면 웹 클라이언트 자바스크립트 라이브러리인 <strong><code>jQuery</code></strong> 에서 사용하는 것 처럼 style을 통해 element를 선택할 수 있어, 기존의 선택자 방식을 그대로 사용할 수 있습니다.</p>
<p>따라서 cherrio를 사용하기 위해서는 Request 모듈을 통해 가져온 HTML 데이터에서 <strong>어떤 element가 우리가 원하는 데이터를 갖고 있는지 파악할 필요가 있습니다.</strong></p>
<p>웹 페이지의 HTML 구조는 크롬의 <strong><code>보기 - 개발자 정보 - 개발자 도구</code></strong>를 통해 확인할 수 있습니다.</p>
<p>학식 메뉴 데이터를 포함하고 있는 table은 다음과 같은 구조를 갖고 있습니다.</p>
<p><img src="/images/post/2017-05-26/html_structure2.png" alt="HTML 구조 - 개발자 도구"></p>
<figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">table</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">thead</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">tr</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">th</span> <span class="attr">class</span>=<span class="string">"bdlrNone"</span>&gt;</span>29(월)<span class="tag">&lt;/<span class="name">th</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">tr</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">thead</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">tbody</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">tr</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">th</span>&gt;</span>1코너<span class="tag">&lt;/<span class="name">th</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">td</span>&gt;</span>햄순두부찌개 / 고추장삼겹살볶음 / 훈제오리철판구이 (2인)<span class="tag">&lt;/<span class="name">td</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">td</span>&gt;</span><span class="tag">&lt;/<span class="name">td</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">td</span> <span class="attr">class</span>=<span class="string">"bdlrNone"</span>&gt;</span><span class="tag">&lt;/<span class="name">td</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">tr</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">tr</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">th</span>&gt;</span>2코너<span class="tag">&lt;/<span class="name">th</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">td</span>&gt;</span>등심돈까스&amp;해쉬포테이토 / 떡갈비난자완스덮밥<span class="tag">&lt;/<span class="name">td</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">td</span>&gt;</span><span class="tag">&lt;/<span class="name">td</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">td</span> <span class="attr">class</span>=<span class="string">"bdlrNone"</span>&gt;</span><span class="tag">&lt;/<span class="name">td</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">tr</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">tr</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">th</span>&gt;</span>3코너<span class="tag">&lt;/<span class="name">th</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">td</span>&gt;</span>냉모밀&amp;닭갈비덮밥<span class="tag">&lt;/<span class="name">td</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">td</span>&gt;</span><span class="tag">&lt;/<span class="name">td</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">td</span> <span class="attr">class</span>=<span class="string">"bdlrNone"</span>&gt;</span><span class="tag">&lt;/<span class="name">td</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">tr</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">tr</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">th</span>&gt;</span>4코너<span class="tag">&lt;/<span class="name">th</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">td</span>&gt;</span>삼겹살스테이크,치즈함박스테이크,고르곤졸라피자,치즈오븐스파게티(토마토),빠네파스타,도리아(불닭,불고기),불고기샐러드,닭가슴살샐러드,훈제연어샐러드,옛날통닭<span class="tag">&lt;/<span class="name">td</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">td</span>&gt;</span><span class="tag">&lt;/<span class="name">td</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">td</span> <span class="attr">class</span>=<span class="string">"bdlrNone"</span>&gt;</span><span class="tag">&lt;/<span class="name">td</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">tr</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">tr</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">th</span>&gt;</span>5코너<span class="tag">&lt;/<span class="name">th</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">td</span>&gt;</span>신라면,신라면정식,만두라면,쫄면,해물짬뽕라면,폭탄라면,떡라면,치즈라면,크림치즈김밥,참치김밥,즉석떡볶이,짜파게티,냄비우동<span class="tag">&lt;/<span class="name">td</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">td</span>&gt;</span><span class="tag">&lt;/<span class="name">td</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">td</span> <span class="attr">class</span>=<span class="string">"bdlrNone"</span>&gt;</span><span class="tag">&lt;/<span class="name">td</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">tr</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">tbody</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">thead</span>&gt;</span>...<span class="tag">&lt;/<span class="name">thead</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">tbody</span>&gt;</span>...<span class="tag">&lt;/<span class="name">tbody</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">thead</span>&gt;</span>...<span class="tag">&lt;/<span class="name">thead</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">tbody</span>&gt;</span>...<span class="tag">&lt;/<span class="name">tbody</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">thead</span>&gt;</span>...<span class="tag">&lt;/<span class="name">thead</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">tbody</span>&gt;</span>...<span class="tag">&lt;/<span class="name">tbody</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">thead</span>&gt;</span>...<span class="tag">&lt;/<span class="name">thead</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">tbody</span>&gt;</span>...<span class="tag">&lt;/<span class="name">tbody</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">thead</span>&gt;</span>...<span class="tag">&lt;/<span class="name">thead</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">tbody</span>&gt;</span>...<span class="tag">&lt;/<span class="name">tbody</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">thead</span>&gt;</span>...<span class="tag">&lt;/<span class="name">thead</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">tbody</span>&gt;</span>...<span class="tag">&lt;/<span class="name">tbody</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">table</span>&gt;</span></span><br></pre></td></tr></table></figure>
<p>제가 필요한 데이터는 <strong>1. 날짜, 2. 코너, 3. 메뉴</strong> 인데 이 데이터는 다음과 같은 구조로 존재합니다.</p>
<p>table 태그 안에 thead &gt; tr &gt; th 에는 날짜, tbody &gt; tr &gt; th 에는 코너, tbody &gt; tr &gt; td 에는 메뉴가 있습니다.</p>
<p>thead와 tbody 태그를 사용해서 데이터를 추출할 수 있지만 테이블이 규칙적으로 만들어져 있기 때문에 table 태그의 tr 태그만 추출한 후 <strong>규칙을 이용</strong>해서도 쉽게 데이터를 추출 할 수 있습니다.</p>
<p>table에서 하루의 식단은 <strong>6개의 tr 태그마다 반복</strong> 되고 있습니다.<br>1번째 tr 태그는 th 태그 안에 <strong>날짜</strong> 데이터를 갖고 있고,<br>2번째~6번째 tr 태그는 th 태그 안에는 <strong>코너</strong> 데이터를, td 태그 안에는 <strong>메뉴</strong> 데이터를 갖고 있습니다.</p>
<p>이를 이용해 다음과 같이 코드를 작성할 수 있습니다.</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> request = <span class="built_in">require</span>(<span class="string">'request'</span>);</span><br><span class="line"><span class="keyword">const</span> cheerio = <span class="built_in">require</span>(<span class="string">'cheerio'</span>);</span><br><span class="line"></span><br><span class="line"><span class="keyword">const</span> url = <span class="string">"http://www.inu.ac.kr/com/cop/mainWork/foodList1.do?siteId=inu&amp;id=inu_050110010000&amp;command=week"</span>;</span><br><span class="line"></span><br><span class="line">request(url, (error, response, body) =&gt; &#123;</span><br><span class="line">  <span class="keyword">if</span> (error) <span class="keyword">throw</span> error;</span><br><span class="line"></span><br><span class="line">  <span class="keyword">let</span> $ = cheerio.load(body);</span><br><span class="line"></span><br><span class="line">  <span class="keyword">try</span> &#123;</span><br><span class="line">    <span class="keyword">let</span> krDay = <span class="string">''</span>;</span><br><span class="line">    <span class="keyword">let</span> corner = <span class="string">''</span>;</span><br><span class="line">    <span class="keyword">let</span> menu = <span class="string">''</span>;</span><br><span class="line"></span><br><span class="line">    $(<span class="string">'table'</span>).find(<span class="string">'tr'</span>).each(<span class="function"><span class="keyword">function</span> (<span class="params">index, elem</span>) </span>&#123;</span><br><span class="line">      <span class="keyword">if</span> (index % <span class="number">6</span> === <span class="number">0</span>) &#123;</span><br><span class="line">        krDay = $(<span class="keyword">this</span>).find(<span class="string">'th'</span>).text().trim();</span><br><span class="line"></span><br><span class="line">        <span class="built_in">console</span>.log(<span class="string">`<span class="subst">$&#123;krDay&#125;</span>`</span>);</span><br><span class="line">      &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">        corner = $(<span class="keyword">this</span>).find(<span class="string">'th'</span>).text().trim();</span><br><span class="line">        menu = $(<span class="keyword">this</span>).find(<span class="string">'th'</span>).next().text().trim();</span><br><span class="line"></span><br><span class="line">        <span class="built_in">console</span>.log(<span class="string">`<span class="subst">$&#123;corner&#125;</span> -&gt; <span class="subst">$&#123;menu&#125;</span>`</span>);</span><br><span class="line">      &#125;</span><br><span class="line">    &#125;);</span><br><span class="line">  &#125; <span class="keyword">catch</span> (error) &#123;</span><br><span class="line">    <span class="built_in">console</span>.error(error);</span><br><span class="line">  &#125;</span><br><span class="line">&#125;);</span><br></pre></td></tr></table></figure>
<p>결과는 다음과 같습니다.</p>
<p><img src="/images/post/2017-05-26/parsing.png" alt="parsing 결과"></p>
<hr>
<p><span id="4"></span></p>
<h2 id="크롤링-이후"><a href="#크롤링-이후" class="headerlink" title="크롤링 이후"></a>크롤링 이후</h2><p>크롤링을 통해 원하는 데이터를 추출했다면 이를 활용해야 합니다. 에밀리에서는 사용자의 요청(학생식당, 카페테리아, 사범대식당, 기숙사식당, 교직원식당)에 따라 해당하는 식당의 메뉴를 제공합니다.</p>
<p>메뉴라는 데이터 특성상 실시간으로 변경되는 데이터가 아니기 때문에 한번 크롤링 하고 나면 사용자의 요청(식당)에 따라 다른 응답해주면 될 뿐 데이터 자체는 요일이 변경되지 않는이상 계속 유효합니다. 따라서 <strong>학교 사이트에서 메뉴를 크롤링하는 행위는 학교 메뉴가 갱신되는 일주일 주기마다 한번씩만 하고 크롤링한 데이터를 DB에 저장한다면 사용자의 요청마다 반복적인 크롤링을 하지 않을 수 있습니다.</strong></p>
<p>이를 위한 해결 방법으로는 <a href="https://github.com/node-schedule/node-schedule" rel="external nofollow noopener noreferrer" target="_blank">node-schedule</a> 모듈을 사용해서 정해진 시간마다 실행되도록 하는 방법이 있습니다.</p>
<p>혹은 <a href="https://aws.amazon.com/ko/lambda/" rel="external nofollow noopener noreferrer" target="_blank">AWS-Lambda</a>를 사용할 수도 있습니다.</p>
<p>저는 <strong><code>AWS-Lambda</code></strong> 를 사용해서 스케쥴링을 하였는데 이와 관련된 내용은 다음에 포스팅하도록 하겠습니다.</p>

        </div>
        
        
        
    </div>
</div>








    
<div class="card">
    
    <div class="card-content article ">
        
        <div class="level article-meta is-size-7 is-uppercase is-mobile is-overflow-x-auto">
            <div class="level-left">
                <time class="level-item has-text-grey" datetime="2017-05-16T15:00:00.000Z">2017-05-17</time>
                
                <div class="level-item">
                <a class="has-link-grey -link" href="/categories/Project/">Project</a>&nbsp;/&nbsp;<a class="has-link-grey -link" href="/categories/Project/Emily/">Emily</a>
                </div>
                
                
                <span class="level-item has-text-grey">
                    
                    
                    15분 읽기 (대략 2197 단어)
                </span>
                
                
            </div>
        </div>
        
        <h1 class="title is-size-3 is-size-4-mobile has-text-weight-normal">
            
                <a class="has-link-black-ter" href="/2017/05/17/Emily/3-make-express-project/">3) Express 프로젝트 생성하기</a>
            
        </h1>
        <div class="content">
            <h2 id="index"><a href="#Index" class="headerlink" title="Index"></a>Index</h2><ol>
<li><a href="#1">들어가기 앞서</a></li>
<li><a href="#2">Express 프로젝트 생성하기</a></li>
<li><a href="#3">옐로아이디 API 문서 살펴보기</a></li>
<li><a href="#4">API 작성하기</a></li>
<li><a href="#5">서버 실행 &amp; API 연동하기</a></li>
<li><a href="#6">마치며</a></li>
</ol>
<hr>
<p><span id="1"></span></p>
<h2 id="들어가기-앞서"><a href="#들어가기-앞서" class="headerlink" title="들어가기 앞서"></a>들어가기 앞서</h2><p><strong>옐로아이디 자동응답API</strong> 를 만드는데에는 여러가지 방법이 있습니다. 저는 <strong><code>Express generator</code></strong>를 사용하여 생성한 <strong><code>Express</code></strong> 기반의 프로젝트로 <strong>Emily</strong>를 만들었고 이 방식으로 설명할 예정입니다. 그러나 간단한 기능만 구현하는 경우 AWS의 Lambda와 API GateWay를 사용해서도 Serverless하게 만들 수 있습니다. 해당 내용은 <a href="http://gun0912.tistory.com/63" rel="external nofollow noopener noreferrer" target="_blank">박상권의 삽질블로그</a>를 참고하면 좋을것 같습니다.</p>
<hr>
<p><span id="2"></span></p>
<h2 id="express-프로젝트-생성하기"><a href="#Express-프로젝트-생성하기" class="headerlink" title="Express 프로젝트 생성하기"></a>Express 프로젝트 생성하기</h2><blockquote>
<p>Node 버전은 <strong>6.6.0</strong>을 사용합니다. Node가 설치되어 있지 않다면 글을 작성하는 기준으로 LTS 버전인 <strong>6.10.3</strong>이상의 버전을 설치합니다. 이왕이면 nvm을 이용하여 설치하는것을 권장합니다. (<a href="https://jongmin92.github.io/2016/09/20/Node/nvm-(Node-Version-Manager">nvm 관련글 참고</a>)<br> npm, Express 에 대해서는 해당 글에서 자세하게 설명하지 않겠습니다. 더 좋은 글들이 많으니 참고하시기 바랍니다!!</p>
</blockquote>
<p>이제 Express 프로젝트를 생성하겠습니다.</p>
<p>npm을 통해 <strong><code>Express generator</code></strong>를 먼저 설치합니다. (global로 추가하기 위해 -g 옵션을 사용합니다.)<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$ npm install express-generator -g</span><br></pre></td></tr></table></figure></p>
<p><strong>Express generator</strong>를 사용해서 프로젝트를 생성합니다. 저는 Emily라는 이름으로 프로젝트를 생성했습니다.<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$ express Emily</span><br></pre></td></tr></table></figure></p>
<p>생성된 프로젝트 폴더로 이동하여 모듈을 설치합니다.<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">$ cd Emily</span><br><span class="line">$ npm install</span><br></pre></td></tr></table></figure></p>
<p>생성된 프로젝트는 다음과 같은 구조입니다. 이제 <a href="https://github.com/plusfriend/auto_reply" rel="external nofollow noopener noreferrer" target="_blank">옐로아이디 API 문서</a>를 참고해서 간단한 봇을 만들어보겠습니다.<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line">.</span><br><span class="line">├── app.js</span><br><span class="line">├── bin</span><br><span class="line">│   └── www</span><br><span class="line">├── package.json</span><br><span class="line">├── public</span><br><span class="line">│   ├── images</span><br><span class="line">│   ├── javascripts</span><br><span class="line">│   └── stylesheets</span><br><span class="line">│       └── style.css</span><br><span class="line">├── routes</span><br><span class="line">│   ├── index.js</span><br><span class="line">│   └── users.js</span><br><span class="line">└── views</span><br><span class="line">    ├── error.jade</span><br><span class="line">    ├── index.jade</span><br><span class="line">    └── layout.jade</span><br></pre></td></tr></table></figure></p>
<hr>
<p><span id="3"></span></p>
<h2 id="api-문서-살펴보기"><a href="#API-문서-살펴보기" class="headerlink" title="API 문서 살펴보기"></a>API 문서 살펴보기</h2><p>카카오톡 이용자가 플러스친구, 옐로아이디에게 보낸 메세지를 카카오톡 서버를 통해 저희가 전달 받은 후 다시 카카오톡 서버로 응답 메시지를 전달해야하기 때문에 카카오톡에서 정의하고 있는 API 문서에 맞게 코드를 작성해야 합니다.</p>
<p>지금부터 <a href="https://github.com/plusfriend/auto_reply" rel="external nofollow noopener noreferrer" target="_blank">옐로아이디 API 문서</a>를 살펴보겠습니다. 본 포스팅에서는 <strong>[이용에 대한 참고사항, 개인정보 수집 및 이용에 대한 주의사항]</strong>에 대해서는 따로 설명하지 않습니다. 그러나 개발전에 한번쯤은 꼭 읽어보셔야합니다.</p>
<h4 id="1-용어"><a href="#1-용어" class="headerlink" title="1. 용어"></a>1. 용어</h4><p>먼저 API 문서에서 사용되는 용어에 대해서 살펴보겠습니다.</p>
<p><strong>(1) 수신 API</strong><br>카카오톡 이용자가 플러스친구, 옐로아이디에게 보낸 메시지를 전달 받은 후 응답을 할 수 있는 API 입니다.<br><strong>http(s) restful api를 통하여</strong> 카카오 API 서버 -&gt; 파트너 서버를 호출합니다.</p>
<p><strong>(2) app_key</strong><br>플러스친구/옐로아이디에서 <strong>자동응답을 위한 앱 등록시 프로필별로 발급되는 고유 키 값</strong>입니다.<br>자동응답 기능만 이용하시는 경우 사용되지 않으며, 일부 app_secret을 통한 별도 인증이 필요한 일부 프로필에만 사용됩니다.</p>
<p><strong>(3) app_secret</strong><br>인증을 위해 app_key와 조합하여 사용되는 키 값입니다.<br>자동응답 기능만 이용하시는 경우 사용되지 않으며, 일부 app_secret을 통한 별도 인증이 필요한 일부 프로필에만 사용됩니다.</p>
<p><strong>(4) user_key</strong><br>특정 카카오톡 이용자를 구분하기 위한 key 입니다. 카카오에서는 이용자의 개인정보를 외부에 제공하지 않으므로, 외부 파트너사에서 카카오톡 이용자를 구분하기 위해서는 카카오로부터 API를 통해 user_key를 response로 받아야 합니다.<br><strong>user_key는 특정 카카오톡 이용자에 대해 프로필별로 각기 다르게 발급됩니다. 따라서 user_key는 해당 프로필에 대해서만 유효합니다.<br>카카오톡 이용자가 프로필을 차단했다가 다시 추가한 경우에는 user_key가 갱신되지 않으며, 이용자가 카카오톡 탈퇴 후 재가입한 경우 갱신됩니다.</strong></p>
<h4 id="2-api"><a href="#2-API" class="headerlink" title="2. API"></a>2. API</h4><p>카카오에서 제공하고 있는 옐로아이디 API는 아래와 같이 5개 입니다. 각 API에 대한 자세한 내용은 문서를 참고합니다.</p>
<table class="table">
<thead>
<tr>
<th>Action</th>
<th style="text-align:center">Method</th>
<th style="text-align:center">URL</th>
<th>설명</th>
</tr>
</thead>
<tbody>
<tr>
<td>키보드</td>
<td style="text-align:center">GET</td>
<td style="text-align:center">/keyboard</td>
<td>처음에 사용자가 채팅방에 들어왔을때 호출되는 API. 사용자에게 키보드에 보여질 내용을 리턴</td>
</tr>
<tr>
<td>메시지</td>
<td style="text-align:center">POST</td>
<td style="text-align:center">/message</td>
<td>사용자가 보내는 메세지/사진/동영상 을 받아 처리해 응답</td>
</tr>
<tr>
<td>친구추가</td>
<td style="text-align:center">POST</td>
<td style="text-align:center">/friend</td>
<td>사용자가 옐로아이디를 친구추가했을때 호출되는 API</td>
</tr>
<tr>
<td>친구차단(삭제)</td>
<td style="text-align:center">DELETE</td>
<td style="text-align:center">/friend</td>
<td>사용자가 옐로아이디를 친구차단(삭제)했을때 호출되는 API</td>
</tr>
<tr>
<td>채팅방 나가기(삭제)</td>
<td style="text-align:center">DELETE</td>
<td style="text-align:center">/chat_room</td>
<td>사용자가 채팅방 나가기(삭제)했을때 호출되는 API</td>
</tr>
</tbody>
</table>

<hr>
<p><span id="4"></span></p>
<h2 id="api-작성하기"><a href="#API-작성하기" class="headerlink" title="API 작성하기"></a>API 작성하기</h2><p>API 문서를 참고하여 코드를 작성하겠습니다. 작성하는 코드는 사용자가 옐로아이디를 친구 추가 후 채팅방에서 입력하는 메시지를 받아 그대로 다시 전달해주는 코드입니다.</p>
<p><strong><code>routes</code></strong> 폴더 아래에 <strong><code>api.js</code></strong>를 추가 후 다음 코드를 작성합니다.<br><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> express = <span class="built_in">require</span>(<span class="string">'express'</span>);</span><br><span class="line"><span class="keyword">const</span> router = express.Router();</span><br><span class="line"></span><br><span class="line"><span class="comment">// 처음에 사용자가 채팅방에 들어왔을때 호출되는 API. 사용자에게 키보드에 보여질 내용을 리턴</span></span><br><span class="line">router.get(<span class="string">'/keyboard'</span>, <span class="function"><span class="keyword">function</span> (<span class="params">req, res</span>) </span>&#123;</span><br><span class="line">  res.status(<span class="number">200</span>).json(</span><br><span class="line">    &#123;</span><br><span class="line">      type: <span class="string">'text'</span></span><br><span class="line">    &#125;</span><br><span class="line">  );</span><br><span class="line">&#125;);</span><br><span class="line"></span><br><span class="line"><span class="comment">// 사용자가 보내는 메세지/사진/동영상 을 받아 처리해 응답</span></span><br><span class="line">router.post(<span class="string">'/message'</span>, <span class="function"><span class="keyword">function</span> (<span class="params">req, res</span>) </span>&#123;</span><br><span class="line">  <span class="keyword">const</span> &#123; user_key, type, content &#125; = req.body;</span><br><span class="line"></span><br><span class="line">  <span class="built_in">console</span>.log(<span class="string">`"<span class="subst">$&#123;user_key&#125;</span>"가 "<span class="subst">$&#123;content&#125;</span>" 메시지 입력`</span>);</span><br><span class="line"></span><br><span class="line">  res.status(<span class="number">200</span>).json(&#123;</span><br><span class="line">    message: &#123;</span><br><span class="line">      content</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;);</span><br><span class="line">&#125;);</span><br><span class="line"></span><br><span class="line"><span class="comment">// 사용자가 옐로아이디를 친구추가했을때 호출되는 API</span></span><br><span class="line">router.post(<span class="string">'/friend'</span>, <span class="function"><span class="keyword">function</span> (<span class="params">req, res</span>) </span>&#123;</span><br><span class="line">  <span class="keyword">const</span> userKey = req.body.user_key;</span><br><span class="line"></span><br><span class="line">  <span class="built_in">console</span>.log(<span class="string">`"<span class="subst">$&#123;userKey&#125;</span>"가 옐로아이디 친구 추가`</span>);</span><br><span class="line"></span><br><span class="line">  res.status(<span class="number">200</span>).json();</span><br><span class="line">&#125;);</span><br><span class="line"></span><br><span class="line"><span class="comment">// 사용자가 옐로아이디를 친구차단(삭제)했을때 호출되는 API</span></span><br><span class="line">router.delete(<span class="string">'/friend/:userKey'</span>, <span class="function"><span class="keyword">function</span> (<span class="params">req, res</span>) </span>&#123;</span><br><span class="line">  <span class="keyword">const</span> userKey = req.body.userKey;</span><br><span class="line"></span><br><span class="line">  <span class="built_in">console</span>.log(<span class="string">`"<span class="subst">$&#123;userKey&#125;</span>"가 옐로아이디 친구 삭제`</span>);</span><br><span class="line"></span><br><span class="line">  res.status(<span class="number">200</span>).json();</span><br><span class="line">&#125;);</span><br><span class="line"></span><br><span class="line"><span class="comment">// 사용자가 채팅방 나가기(삭제)했을때 호출되는 API</span></span><br><span class="line">router.delete(<span class="string">'/chat_room/:userKey'</span>, <span class="function"><span class="keyword">function</span> (<span class="params">req, res</span>) </span>&#123;</span><br><span class="line">  <span class="keyword">const</span> userKey = req.body.user_key;</span><br><span class="line"></span><br><span class="line">  <span class="built_in">console</span>.log(<span class="string">`"<span class="subst">$&#123;userKey&#125;</span>"가 옐로아이디 채팅방 삭제`</span>);</span><br><span class="line"></span><br><span class="line">  res.status(<span class="number">200</span>).json();</span><br><span class="line">&#125;);</span><br><span class="line"></span><br><span class="line"><span class="built_in">module</span>.exports = router;</span><br></pre></td></tr></table></figure></p>
<p>작성한 router를 <strong><code>app.js</code></strong>에 추가합니다.<br><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> api = <span class="built_in">require</span>(<span class="string">'./routes/api'</span>);</span><br><span class="line">app.use(<span class="string">'/api'</span>, api);</span><br></pre></td></tr></table></figure></p>
<hr>
<p><span id="5"></span></p>
<h2 id="서버-실행-amp-api-연동하기"><a href="#서버-실행-amp-API-연동하기" class="headerlink" title="서버 실행 &amp; API 연동하기"></a>서버 실행 &amp; API 연동하기</h2><p>서버는 해당 프로젝트 경로에서 <strong>npm start</strong> 혹은 <strong>node bin/www</strong> 로 실행할 수 있습니다. 그러나 해당 서버는 외부에서 접근 가능해야 합니다. 즉, AWS의 EC2와 같은 클라우드 자원을 사용하거나(추천), 본인의 컴퓨터 혹은 노트북에서 서버를 실행한다면 포트포워딩을 통해 <strong>외부에서 접근할 수 있도록 설정이 필요합니다.</strong></p>
<p>외부에서 접근할 수 있도록 설정이 끝난 후에는 <a href="https://yellowid.kakao.com/login" rel="external nofollow noopener noreferrer" target="_blank">옐로아이디 홈페이지</a>에서 해당 서버의 URL을 기재합니다.</p>
<p><img src="/images/post/2017-05-17/yellowid_1.png" alt="옐로아이디 자동응답 API 등록-1"></p>
<p><img src="/images/post/2017-05-17/yellowid_2.png" alt="옐로아이디 자동응답 API 등록-2"></p>
<p>앱 URL을 기재하고 <strong>API TEST</strong> 버튼을 누르면 카카오에서 해당 URL에 test request를 요청합니다. test request의 결과를 통해 잘 작동하는지 확인이 가능합니다.</p>
<hr>
<p><span id="6"></span></p>
<h2 id="마치며"><a href="#마치며" class="headerlink" title="마치며"></a>마치며</h2><p>이번 포스팅에서는 Express 프로젝트를 생성하고 API 문서를 토대로 간단한 봇을 만들어보았습니다. 해당 API를 토대로 앞으로 구현하고자 하는 기능을 구현하면 될것입니다.</p>
<p>다음번에는 제가 Emily를 만들며 구현하고자 했던 부분들을 어떤식으로 해결했는지에 대해 포스팅하겠습니다.</p>

        </div>
        
        
        
    </div>
</div>








    
<div class="card">
    
    <div class="card-content article ">
        
        <div class="level article-meta is-size-7 is-uppercase is-mobile is-overflow-x-auto">
            <div class="level-left">
                <time class="level-item has-text-grey" datetime="2017-04-07T15:00:00.000Z">2017-04-08</time>
                
                <div class="level-item">
                <a class="has-link-grey -link" href="/categories/Programming/">Programming</a>&nbsp;/&nbsp;<a class="has-link-grey -link" href="/categories/Programming/Node/">Node</a>
                </div>
                
                
                <span class="level-item has-text-grey">
                    
                    
                    16분 읽기 (대략 2431 단어)
                </span>
                
                
            </div>
        </div>
        
        <h1 class="title is-size-3 is-size-4-mobile has-text-weight-normal">
            
                <a class="has-link-black-ter" href="/2017/04/08/Node/sequelize/">Sequelize 사용하기</a>
            
        </h1>
        <div class="content">
            <h2 id="index"><a href="#Index" class="headerlink" title="Index"></a>Index</h2><ol>
<li><a href="#1">ORM 이란?</a></li>
<li><a href="#2">Sequelize 설치하기</a></li>
<li><a href="#3">Sequelize CLI 사용하기</a></li>
<li><a href="#4">Sequelize config 설정하기</a></li>
<li><a href="#5">Model 정의하기</a></li>
<li><a href="#6">Sequelize Sync 사용하기</a></li>
<li><a href="#7">Sequelize 예제 (SELECT)</a></li>
<li><a href="#8">Sequelize 예제 (INSERT)</a></li>
<li><a href="#9">Sequelize 예제 (UPDATE)</a></li>
<li><a href="#10">Sequelize 예제 (DELETE)</a></li>
</ol>
<hr>
<p><span id="1"></span></p>
<h2 id="orm-이란"><a href="#ORM-이란" class="headerlink" title="ORM 이란?"></a>ORM 이란?</h2><p><strong>관계형 데이터베이스(RDB)</strong>를 사용할때 데이터베이스의 데이터 조작(CRUD)를 위해서는 <strong>SQL 문</strong>을 작성해야합니다. SQL 문은 비즈니스 로직을 구성하고 있는 코드와 함께 작성하게 되는데 이는 코드의 가독성을 떨어뜨릴뿐만 아니라, 사용하는 관계형 데이터베이스에 따라 조금씩의 차이가 존재하기 때문에 문제가 발생할 수 있습니다. 이를 해결하기 위해 ORM을 사용합니다.</p>
<p><strong><code>ORM(Object Relational Mapping)</code></strong>은 객체(Object)와 관계(Relation)를 맵핑(Mapping)하여 <strong>비즈니스 로직에 집중</strong>할 수 있도록 데이터 처리 로직을 추상화시킵니다.</p>
<p>객체와 관계를 매핑한다는 것은 <strong>데이터베이스에 저장된 레코드를 객체로 바꿔표현한다는 의미</strong>하며, 비즈니스 로직에 집중할 수 있도록 데이터 처리 로직을 추상화한다는 것은 쿼리를 사용하지 않고도 데이터베이스를 사용할 수 있음을 뜻합니다.</p>
<p>ORM을 사용할 경우 특정 DBMS에 종속되지 않으며 생산성, 독립성, 가독성(SQL문이 코드에 들어가지 않기때문) 및 유지보수 측면에서의 장점이 있지만 반대로 RAW query에 비해 퍼포먼스가 떨어지고, query가 복잡해 질수록 오히려 생산성이 저하될 수 있다는 단점도 존재합니다.</p>
<p><img src="/images/post/2017-04-08/orm.png" alt="ORM"></p>
<hr>
<p><span id="2"></span></p>
<h2 id="sequelize-설치하기"><a href="#Sequelize-설치하기" class="headerlink" title="Sequelize 설치하기"></a>Sequelize 설치하기</h2><p><strong><a href="http://docs.sequelizejs.com/en/v3/" rel="external nofollow noopener noreferrer" target="_blank">Sequelize</a></strong>는 Node에서 가장 많이 사용되는 ORM 입니다.</p>
<p><strong>RDS로  PostgresSQL, MySQL, MariaDB, SQLite, MSSQL</strong>을 지원하고 transaction, read replication등 다양한 기능을 제공하고 있으며. 또한 <strong>Promise</strong>를 기본으로 동작하기 때문에 비동기 코드를 보기좋게 작성할 수 있습니다.</p>
<p>실습을 위해 express-generator를 통해 Express 프로젝트를 생성후 <code>sequelize</code>와 <code>mysql</code> module을 설치합니다. (Express 프로젝트를 생성하는 부분은 생략합니다.)</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">npm install --save sequelize mysql</span><br></pre></td></tr></table></figure>
<p><strong><a href="https://github.com/sequelize/cli" rel="external nofollow noopener noreferrer" target="_blank">Sequelize Command Line Interface(CLI)</a></strong>를 사용하기 위해서 <code>sequelize-cli</code> module을 설치합니다.</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">npm install -g sequelize-cli</span><br></pre></td></tr></table></figure>
<hr>
<p><span id="3"></span></p>
<h2 id="sequelize-cli-사용하기"><a href="#Sequelize-CLI-사용하기" class="headerlink" title="Sequelize CLI 사용하기"></a>Sequelize CLI 사용하기</h2><p><strong>sequelize cli</strong>를 통해서 <strong><code>migration(마이그레이션), seeder(시더), model(모델)</code></strong>의 초기 설정을 손쉽게 할 수 있습니다. 이번 포스팅에서는 <strong>model</strong>에 관해서 알아보겠습니다.</p>
<p>RDB의 테이블을 model로 정의를 하면 해당 model을 통해 데이터 처리가 가능하게 됩니다.<br>먼저 생성한 express 프로젝트에 sequelize cli 명령어를 통해 sequelize 설정 파일을 생성 후 model을 정의해 보겠습니다.</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">sequelize init:config --config config/sequelize.json</span><br><span class="line">sequelize init:models</span><br></pre></td></tr></table></figure>
<p>sequelize cli의 <strong>sequelize init:config</strong>라는 명령어로 sequelize관련 config 파일을 자동으로 생성할 수 있습니다. 아무런 옵션을 주지 않는다면 <strong>config/config.json</strong> 파일이 생성됩니다.</p>
<p><strong>sequelize init:models</strong> 명령어를 통해서는 models 정의에 관련된 기본 구조를 생성할 수 있습니다.</p>
<p>위 2개의 명령어를 실행하면 다음과 같은 폴더와 파일이 생성됩니다.<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">├── config/</span><br><span class="line">  └── sequelize.json</span><br><span class="line">├── models/</span><br><span class="line">  └── index.js</span><br></pre></td></tr></table></figure></p>
<hr>
<p><span id="4"></span></p>
<h2 id="sequelize-config-설정하기"><a href="#Sequelize-config-설정하기" class="headerlink" title="Sequelize config 설정하기"></a>Sequelize config 설정하기</h2><p>sequelize cli를 통해 생성한 <code>config/sequelize.json</code>파일에 데이터베이스에 관련된 설정 값을 입력합니다.</p>
<p> <strong><code>NODE_ENV</code></strong> 에 따라 각기 다른 값을 사용하기 때문에 상황에 맞게 설정할 수 있습니다. NODE_ENV에 대해 잘 알지 못한다면 <a href="http://inspiredjw.com/entry/Nodejs-%EC%97%90%EC%84%9C-NODEENV-%EA%B0%92%EC%9C%BC%EB%A1%9C-%ED%99%98%EA%B2%BD-%EC%84%A4%EC%A0%95%ED%95%98%EA%B8%B0" rel="external nofollow noopener noreferrer" target="_blank">이곳</a>을 참고하세요.</p>
<p>데이터베이스를 사용한 프로젝트 경험이 있다면 대부분의 config 값은 입력할 수 있습니다. config 값중 <code>dialect</code>에는 사용하는 RDB 이름을 입력해야 합니다. diaect에 사용 가능한 값은 <a href="http://docs.sequelizejs.com/en/1.7.0/docs/usage/" rel="external nofollow noopener noreferrer" target="_blank">sequelize docs</a>를 참고하세요. 현재 사용 가능한 RDB 로는 ‘mysql’, ‘sqlite’, ‘postgress’, ‘mariadb’가 있습니다.</p>
<p>추가적으로 커넥션 풀과 로깅 기능을 사용한다면 해당 값을 추가합니다. 추가적으로 필요한 옵션은 docs를 참고하세요.<br><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="string">"pool"</span>: &#123;</span><br><span class="line">    <span class="string">"max"</span>: <span class="number">20</span>,</span><br><span class="line">    <span class="string">"min"</span>: <span class="number">0</span>,</span><br><span class="line">    <span class="string">"idle"</span>: <span class="number">5000</span></span><br><span class="line">&#125;,</span><br><span class="line"><span class="string">"logging"</span>: <span class="literal">true</span></span><br></pre></td></tr></table></figure></p>
<hr>
<p><span id="5"></span></p>
<h2 id="model-정의하기"><a href="#Model-정의하기" class="headerlink" title="# Model 정의하기"></a># Model 정의하기</h2><p>Model을 생성하기 전 sequelize cli를 통해 생성한 <code>models/index.js</code>파일을 살펴보겠습니다. index.js 의 역할은 <strong>config/sequelize.json</strong>의 설정값을 읽어 sequelize를 생성한 후 <strong>models 폴더</strong> 아래에 정의한 model 관련 js 파일을 모두 로딩하여 db 객체에 Model을 정의한 후 반환합니다.</p>
<p>sequelize config 관련 파일을 sequelize.json으로 생성하였다면 config 파일을 불러오는 <strong>require 부분의 경로를 수정</strong>해주어야 합니다.</p>
<p>이제 models 폴더 아래에 간단한 모델을 정의해 보겠습니다. <strong><code>user.js</code></strong>를 생성 후 다음의 코드를 입력합니다.</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">module</span>.exports = <span class="function"><span class="keyword">function</span> (<span class="params">sequelize, DataTypes</span>) </span>&#123;</span><br><span class="line">  <span class="keyword">const</span> user = sequelize.define(<span class="string">'User'</span>, &#123;</span><br><span class="line">    userID: &#123; <span class="attr">field</span>: <span class="string">'user_id'</span>, <span class="attr">type</span>: DataTypes.STRING(<span class="number">50</span>), <span class="attr">unique</span>: <span class="literal">true</span>, <span class="attr">allowNull</span>: <span class="literal">false</span> &#125;,</span><br><span class="line">    password: &#123; <span class="attr">field</span>: <span class="string">'password'</span>, <span class="attr">type</span>: DataTypes.STRING(<span class="number">30</span>), <span class="attr">allowNull</span>: <span class="literal">false</span> &#125;,</span><br><span class="line">  &#125;, &#123;</span><br><span class="line">    <span class="comment">// don't use camelcase for automatically added attributes but underscore style</span></span><br><span class="line">    <span class="comment">// so updatedAt will be updated_at</span></span><br><span class="line">    underscored: <span class="literal">true</span>,</span><br><span class="line"></span><br><span class="line">    <span class="comment">// disable the modification of tablenames; By default, sequelize will automatically</span></span><br><span class="line">    <span class="comment">// transform all passed model names (first parameter of define) into plural.</span></span><br><span class="line">    <span class="comment">// if you don't want that, set the following</span></span><br><span class="line">    freezeTableName: <span class="literal">true</span>,</span><br><span class="line"></span><br><span class="line">    <span class="comment">// define the table's name</span></span><br><span class="line">    tableName: <span class="string">'user'</span></span><br><span class="line">  &#125;);</span><br><span class="line"></span><br><span class="line">  <span class="keyword">return</span> user;</span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line"><span class="comment">/*</span></span><br><span class="line"><span class="comment"> Sequelize 참고</span></span><br><span class="line"><span class="comment"> DataTypes =&gt; http://docs.sequelizejs.com/en/v3/api/datatypes/</span></span><br><span class="line"><span class="comment"> Associations =&gt; http://docs.sequelizejs.com/en/v3/api/associations/</span></span><br><span class="line"><span class="comment"> Model Function =&gt; http://docs.sequelizejs.com/en/v3/api/model/</span></span><br><span class="line"><span class="comment"> */</span></span><br></pre></td></tr></table></figure>
<p>Model을 생성하며 사용된 옵션은 주석과 docs를 참고합니다. 이제 모델에 대한 정의가 끝났습니다. 데이터베이스에 <strong>user</strong>라는 테이블은 <strong>User</strong>라는 Object로 매핑되었고 <strong>user_id, password</strong>라는 칼럼은 User Object의 속성으로 매핑되었습니다.</p>
<hr>
<p><span id="6"></span></p>
<h2 id="sequelize-sync-사용하기"><a href="#Sequelize-Sync-사용하기" class="headerlink" title="Sequelize Sync 사용하기"></a>Sequelize Sync 사용하기</h2><p>Sequeliz에서는 <strong>입력(INSERT), 수정(UPDATE), 조회(SELECT), 삭제(DELETE)</strong>의 <strong><code>데이터 조작(DML: Data Manipulation Language)</code></strong>뿐만 아니라 데이터베이스의 <strong>스키마 객체를 생성(CREATE), 변경(ALERT), 제거(DROP)</strong> 할 수 있는 <strong><code>데이터 정의(DDL: Data Definition Language)</code></strong>도 지원합니다.<br>따라서 이미 만들어진 데이터베이스 테이블에 모델을 매핑할 수 있을 뿐만 아니라, <strong>정의한 모델을 바탕으로 테이블을 생성할 수도 있습니다.(동기화)</strong></p>
<p>해당 기능을 사용하기 위해서는 Sequelize의 <strong><code>sync</code></strong> 메서드를 사용합니다. <strong><code>app.js</code></strong>에 다음의 코드를 추가합니다.<br><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// connect To DB</span></span><br><span class="line"><span class="keyword">const</span> models = <span class="built_in">require</span>(<span class="string">'./models'</span>);</span><br><span class="line">models.sequelize.sync()</span><br><span class="line">  .then(<span class="function"><span class="params">()</span> =&gt;</span> &#123;</span><br><span class="line">    <span class="built_in">console</span>.log(<span class="string">'✓ DB connection success.'</span>);</span><br><span class="line">    <span class="built_in">console</span>.log(<span class="string">'  Press CTRL-C to stop\n'</span>);</span><br><span class="line">  &#125;)</span><br><span class="line">  .catch(<span class="function"><span class="params">err</span> =&gt;</span> &#123;</span><br><span class="line">    <span class="built_in">console</span>.error(err);</span><br><span class="line">    <span class="built_in">console</span>.log(<span class="string">'✗ DB connection error. Please make sure DB is running.'</span>;</span><br><span class="line">    process.exit();</span><br><span class="line">  &#125;);</span><br></pre></td></tr></table></figure></p>
<p>sync 메서드를 호출하여 실패했을 경우에는 에러 메시지를 출력 후 프로세스를 종료합니다.</p>
<p>sync 메서드는 모델에서 정의한 이름의 테이블이 존재하지 않을 경우에만 동작합니다. 이미 테이블이 존재할 경우에는 <strong><code>models.sequelize.sync({force: true})</code></strong> 과 같이 force 옵션을 주어 강제적으로 테이블을 제거 후 다시 생성이 가능하지만 매우 위험한 옵션이므로 주의를 기울여 사용해야 합니다.</p>
<hr>
<p><span id="7"></span></p>
<h2 id="sequelize-예제-select"><a href="#Sequelize-예제-SELECT" class="headerlink" title="Sequelize 예제 (SELECT)"></a>Sequelize 예제 (SELECT)</h2><p>이제 Sequelize를 사용하여 SELECT를 사용해보겠습니다. 유저 리스트를 가져오는 query는 다음과 같습니다.<br><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">models.User.findAll()</span><br><span class="line">  .then(results) &#123;</span><br><span class="line">     res.json(results);</span><br><span class="line">  &#125;)</span><br><span class="line">  .catch(<span class="function"><span class="params">err</span> =&gt;</span> &#123;</span><br><span class="line">     <span class="built_in">console</span>.error(err);</span><br><span class="line">  &#125;);</span><br></pre></td></tr></table></figure></p>
<p>User 테이블에 있는 모든 row를 가져오는 query입니다. Sequelize는 결과를 Promise로 리턴하기 때문에 <strong><code>findAll</code></strong> 메서드 역시 Promise를 리턴합니다. 따라서 query의 결과는 then에서 받고, catch문에서 상황에 맞게 error 처리(handling)를 하면됩니다.</p>
<p>findAll의 더 자세한 사용법은 <a href="http://sequelize.readthedocs.io/en/latest/api/model/#findalloptions-promisearrayinstance" rel="external nofollow noopener noreferrer" target="_blank">Sequelize-model-findAll 설명</a>을 참고합니다.</p>
<hr>
<p><span id="8"></span></p>
<h2 id="sequelize-예제-insert"><a href="#Sequelize-예제-INSERT" class="headerlink" title="Sequelize 예제 (INSERT)"></a>Sequelize 예제 (INSERT)</h2><p>Sequelize를 사용하여 INSERT를 하는 방법은 다음과 같습니다.<br><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">models.User.create(&#123;<span class="attr">userID</span>: <span class="string">'유저ID'</span>, <span class="attr">password</span>: <span class="string">'유저PW'</span>&#125;)</span><br><span class="line">  .then(<span class="function"><span class="params">result</span> =&gt;</span> &#123;</span><br><span class="line">     res.json(result);</span><br><span class="line">  &#125;)</span><br><span class="line">  .catch(<span class="function"><span class="params">err</span> =&gt;</span> &#123;</span><br><span class="line">     <span class="built_in">console</span>.error(err);</span><br><span class="line">  &#125;);</span><br></pre></td></tr></table></figure></p>
<p><strong><code>create</code></strong> 메서드의 매개변수에 model에서 매핑한 내용을 토대로 데이터를 넣으면 query를 실행 후 insert된 row정보가 반환됩니다.</p>
<p>create의 더 자세한 사용법은 <a href="http://sequelize.readthedocs.io/en/latest/api/model/#createvalues-options-promiseinstance" rel="external nofollow noopener noreferrer" target="_blank">Sequelize-model-create 설명</a>을 참고합니다.</p>
<hr>
<p><span id="9"></span></p>
<h2 id="sequelize-예제-update"><a href="#Sequelize-예제-UPDATE" class="headerlink" title="Sequelize 예제 (UPDATE)"></a>Sequelize 예제 (UPDATE)</h2><p>User 테이블의 데이터를 수정할때는 다음과 같이 사용합니다.<br><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">models.User.update(&#123;<span class="attr">password</span>: <span class="string">'새로운 유저PW'</span>&#125;, &#123;<span class="attr">where</span>: &#123;<span class="attr">userID</span>: <span class="string">'유저ID'</span>&#125;&#125;)</span><br><span class="line">  .then(<span class="function"><span class="params">result</span> =&gt;</span> &#123;</span><br><span class="line">     res.json(result);</span><br><span class="line">  &#125;)</span><br><span class="line">  .catch(<span class="function"><span class="params">err</span> =&gt;</span> &#123;</span><br><span class="line">     <span class="built_in">console</span>.error(err);</span><br><span class="line">  &#125;);</span><br></pre></td></tr></table></figure></p>
<p><strong><code>update</code></strong> 메서드의 매개변수에는 update할 데이터를 입력합니다.</p>
<p>update 더 자세한 사용법은 <a href="http://sequelize.readthedocs.io/en/latest/api/model/#updatevalues-options-promisearrayaffectedcount-affectedrows" rel="external nofollow noopener noreferrer" target="_blank">Sequelize-model-update 설명</a>을 참고합니다.</p>
<hr>
<p><span id="10"></span></p>
<h2 id="sequelize-예제-delete"><a href="#Sequelize-예제-DELETE" class="headerlink" title="Sequelize 예제 (DELETE)"></a>Sequelize 예제 (DELETE)</h2><p>User 테이블의 데이터를 삭제할때는 다음과 같이 사용합니다.<br><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">models.User.destroy(&#123;<span class="attr">where</span>: &#123;<span class="attr">userID</span>: <span class="string">'유저ID'</span>&#125;&#125;)</span><br><span class="line">  .then(<span class="function"><span class="params">result</span> =&gt;</span> &#123;</span><br><span class="line">     res.json(&#123;&#125;);</span><br><span class="line">  &#125;)</span><br><span class="line">  .catch(<span class="function"><span class="params">err</span> =&gt;</span> &#123;</span><br><span class="line">     <span class="built_in">console</span>.error(err);</span><br><span class="line">  &#125;);</span><br></pre></td></tr></table></figure></p>
<p><strong><code>destroy</code></strong> 메서드의 매개변수에는 where 조건을 입력합니다.<strong>(where 조건을 입력하지 않을 경우 테이블의 모든 row가 삭제되기 때문에 주의해야 합니다.)</strong></p>
<p>destroy 더 자세한 사용법은 <a href="http://sequelize.readthedocs.io/en/latest/api/model/#destroyoptions-promiseinteger" rel="external nofollow noopener noreferrer" target="_blank">Sequelize-model-update 설명</a>을 참고합니다.</p>

        </div>
        
        
        
    </div>
</div>








    
<div class="card">
    
    <div class="card-content article ">
        
        <div class="level article-meta is-size-7 is-uppercase is-mobile is-overflow-x-auto">
            <div class="level-left">
                <time class="level-item has-text-grey" datetime="2017-03-20T15:00:00.000Z">2017-03-21</time>
                
                <div class="level-item">
                <a class="has-link-grey -link" href="/categories/Project/">Project</a>&nbsp;/&nbsp;<a class="has-link-grey -link" href="/categories/Project/Emily/">Emily</a>
                </div>
                
                
                <span class="level-item has-text-grey">
                    
                    
                    5분 읽기 (대략 739 단어)
                </span>
                
                
            </div>
        </div>
        
        <h1 class="title is-size-3 is-size-4-mobile has-text-weight-normal">
            
                <a class="has-link-black-ter" href="/2017/03/21/Emily/2-make-kakao-yellow/">2) 카카오 옐로아이디 만들기</a>
            
        </h1>
        <div class="content">
            <h2 id="index"><a href="#Index" class="headerlink" title="Index"></a>Index</h2><ol>
<li><a href="#1">옐로아이디란?</a></li>
<li><a href="#2">옐로아이디 만들기</a></li>
</ol>
<hr>
<p><span id="1"></span></p>
<h2 id="옐로아이디란"><a href="#옐로아이디란" class="headerlink" title="옐로아이디란?"></a>옐로아이디란?</h2><p><a href="https://yellowid.kakao.com/login" rel="external nofollow noopener noreferrer" target="_blank">옐로아이디</a>란 <code>고객과 소통할 수 있는 카카오톡 비즈니스 아이디입니다.</code> 옐로아이디를 무료로 만들어 비즈니스에 활용가능하며 옐로아이디는 별도의 전화번호가 필요없고, 한글 아이디 검색이 가능합니다.</p>
<p><img src="/images/post/2017-03-21/search_yellowid.jpeg" alt="옐로아이디 검색결과"></p>
<p>옐로아이디는 <strong><code>API형 자동응답</code>이 가능하기 때문에 사용자의 요청에 따라 자유롭게 답변 시나리오 및 이벤트를 구성할 수 있습니다.</strong></p>
<p>카카오 뿐만 아니라 <strong>페이스북, 텔레그램 또한 API형 자동응답 기능을 제공하기 때문에 굳이 옐로아이디를 사용하지 않아도 자동응답 챗봇을 만들 수 있습니다.</strong></p>
<hr>
<p><span id="2"></span></p>
<h2 id="옐로아이디-만들기"><a href="#옐로아이디-만들기" class="headerlink" title="옐로아이디 만들기"></a>옐로아이디 만들기</h2><p>옐로아이디를 사용하기위해서는 먼저 정해진 절차에 따라 가입신청을 해야합니다. <a href="https://yellowid.kakao.com/join" rel="external nofollow noopener noreferrer" target="_blank">Yellow ID 신규가입</a>을 통해 옐로아이디 신청이 가능합니다. 모바일이라면 <a href="https://play.google.com/store/apps/details?id=com.kakao.yellowid" rel="external nofollow noopener noreferrer" target="_blank">Yellow ID App</a> 설치 후 신청이 가능합니다.</p>
<p><a href="https://github.com/plusfriend/auto_reply" rel="external nofollow noopener noreferrer" target="_blank">옐로아이디 API 문서</a>는 공개되어 있기 때문에 옐로아이디 가입신청 후 기획이 되어있다며 바로 개발이 가능합니다. 가입신청이 완료되면 발급받은 API 키만 적용해주면 됩니다.</p>
<h4 id="신청시-주의사항"><a href="#신청시-주의사항" class="headerlink" title="신청시 주의사항"></a>신청시 주의사항</h4><ul>
<li><code>프로필 이름</code>과 <code>옐로아이디</code>는 <strong>개설 후 변경이 불가능합니다.</strong>(위의 사진에서 <strong>인천대학교 에밀리</strong>가 프로필 이름, <strong>@인천대학교-에밀리</strong>가 옐로아이디를 의미합니다.</li>
<li><code>주소</code>는 입력하지 않아도 상관없습니다.</li>
<li><code>홈페이지 주소</code>를 입력하게 되는데 저는 처음 블로그 주소를 기재하였다가 <strong>옐로아이디의 목적과 맞지 않다는 이유로 반려</strong>되었습니다. 옐로아이디에 대한 설명이 있는 홈페이지가 없다면 <strong>페이스북 페이지</strong>를 생성한 후 간단히 옐로아이디에 대한 목적과 서비스에 대해 간단한 글을 남긴 후 홈페이지 주소에 페이스북 페이지를 기재하는 방법이 좋습니다.</li>
<li><strong>심사는 2~3일 정도의 시간이 소요됩니다.</strong> 심사에서 반려될 경우 해당 반려사유를 참고하여 수정 후 재심사를 요청해야합니다. 재심사도 2~3일 정도의 시간이 소요되기 때문에 처음 신청시 반려되는 불상사가 일어나지 않도록 공들여 작성해야합니다.</li>
</ul>

        </div>
        
        
        
    </div>
</div>








    
<div class="card">
    
    <div class="card-content article ">
        
        <div class="level article-meta is-size-7 is-uppercase is-mobile is-overflow-x-auto">
            <div class="level-left">
                <time class="level-item has-text-grey" datetime="2017-03-13T15:15:30.000Z">2017-03-14</time>
                
                <div class="level-item">
                <a class="has-link-grey -link" href="/categories/Programming/">Programming</a>&nbsp;/&nbsp;<a class="has-link-grey -link" href="/categories/Programming/JavaScript/">JavaScript</a>
                </div>
                
                
                <span class="level-item has-text-grey">
                    
                    
                    16분 읽기 (대략 2418 단어)
                </span>
                
                
            </div>
        </div>
        
        <h1 class="title is-size-3 is-size-4-mobile has-text-weight-normal">
            
                <a class="has-link-black-ter" href="/2017/03/14/JavaScript/understand-prototype/">Prototype 이제는 이해하자</a>
            
        </h1>
        <div class="content">
            <h2 id="index"><a href="#Index" class="headerlink" title="Index"></a>Index</h2><ol>
<li><a href="#1">prototype은 왜 어려울까?</a></li>
<li><a href="#2">객체(object)는 함수(function)로부터 시작된다</a></li>
<li><a href="#3">함수(function) 생성시 발생하는 일</a></li>
<li><a href="#4">객체(object) 생성시 발생하는 일</a></li>
<li><a href="#5">프로토타입 체인(Prototype Chain)</a></li>
<li><a href="#6">번외</a></li>
</ol>
<hr>
<p><span id="1"></span></p>
<h2 id="prototype은-왜-어려울까"><a href="#prototype은-왜-어려울까" class="headerlink" title="prototype은 왜 어려울까?"></a>prototype은 왜 어려울까?</h2><p>C++, Java와 같은 <code>클래스</code> 기반 객체지향 언어와 달리 자바스크립트는 <code>프로토타입</code> 기반 객체지향 언어입니다. 프로토타입을 사용하여 객체지향을 추구하기 때문에 자바스크립트를 사용함에 있어 프로토타입을 이해하는 것은 중요합니다. 최근 ECMA6 표준에서 <code>Class</code> 문법이 추가되었지만 C++, Java에서 말하는 클래스가 아닌 <code>프로토타입</code>을 기반으로 하여 만들어진 문법입니다.</p>
<p>자바스크립트의 프로토타입을 처음 공부하면서 <strong>prototype, [[prototype]], __proto__, 객체, 함수, prototype chain</strong> 과 같은 용어들을 접하게 되는데 공부할수록 서로 뒤엉켜지고, 모르는 것도 아닌 그렇다고 제대로 알고 있는것도 아닌 어중간한 상태가 됩니다.</p>
<p>자바스크립트를 사용한 경험이 있으시다면 아래의 코드와 같은 형태를 경험한적이 있으실겁니다. 지금부터 아래의 코드가 어떤 원리로 동작하게 되는지 알아보겠습니다.</p>
<p><img src="/images/post/2017-03-14/prototype_example_1.png" alt="prototype에 property 추가"></p>
<p>먼저 프로토타입에 대해 이해하기 위해서는 <code>객체(object)는 함수(function)로부터 시작된다</code>라는 것을 알아야 합니다. 이는 prototype을 이해하는데 많은 도움을 줍니다.</p>
<hr>
<p><span id="2"></span></p>
<h2 id="객체object는-함수function로부터-시작된다"><a href="#객체-object-는-함수-function-로부터-시작된다" class="headerlink" title=" 객체(object)는 함수(function)로부터 시작된다"></a><span style="color:red"> 객체(object)는 함수(function)로부터 시작된다</span></h2><p><strong>자바스크립트에서 <a href="https://developer.mozilla.org/ko/docs/Glossary/Primitive" rel="external nofollow noopener noreferrer" target="_blank">primitive</a>를 제외하고는 모두 객체(object)입니다.</strong><br> <strong>앞으로 등장하는 Object와 Function은 function(즉, 생성자)입니다. object는 객체를 의미합니다.</strong></p>
<p>다음의 코드를 분석하기 전 <code>객체(object)는 함수(function)로부터 시작된다</code>라는걸 다시한번 기억하겠습니다.<br><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">Book</span>(<span class="params"></span>) </span>&#123; &#125;                <span class="comment">// 함수</span></span><br><span class="line"><span class="keyword">var</span> jsBook = <span class="keyword">new</span> Book();           <span class="comment">// 객체 생성</span></span><br></pre></td></tr></table></figure></p>
<p>위의 코드에서 <strong>Book이라는 함수를 통해서 jsBook이라는 객체</strong>를 생성했습니다. 이때 Book 함수를 <code>생성자</code>라고 합니다. 생성자는 새로 생성된 객체를 초기화하는 역할을 합니다. 코어 자바스크립트는 기본 타입에 대한 생성자를 내장하고 있는데 이는 다음 코드를 통해 확인이 가능합니다.<br><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> cssBook = &#123;&#125;;                  <span class="comment">// 생성자 선언 없이 객체 생성</span></span><br></pre></td></tr></table></figure></p>
<p>위에서는 리터럴 방식을 사용하여 객체를 생성하였습니다. 리터럴 방식 또한 결과적으로는 함수를 통하여 객체를 생성하게 됩니다. <strong>자바스크립트 엔진</strong>이 해당 리터럴을 다음과 같이 해석합니다.<br><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> cssBook = <span class="keyword">new</span> <span class="built_in">Object</span>();        <span class="comment">// 객체 생성</span></span><br></pre></td></tr></table></figure></p>
<p>따라서 결과적으로는 리터럴 방식으로 객체를 생성할때도 Object라는 함수(생성자)를 통해서 객체를 생성하게 됩니다. <strong>Object 뿐만 아니라 Array, Function, Date, RegExp 모두 함수입니다.</strong></p>
<p><img src="/images/post/2017-03-14/various_function.png" alt="Object, Array, Function, Date, RegExp - 모두 함수(function)이다"></p>
<p>배열도 객체이기 때문에(자바스크립트 배열은 객체의 특별한 형태입니다. 프로퍼티 이름이 정수로 사용되며, length 프로퍼티를 가집니다.) 객체를 생성할때와 마찬가지로 배열(객체)의 생성에도 함수가 관여하게 됩니다. 따라서 무심코 사용했던 배열의 리터럴 표현도 결국에는 자바스크립트 엔진이 다음과 같이 해석합니다.<br><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> books = [<span class="string">'html'</span>, <span class="string">'css'</span>, <span class="string">'js'</span>];                  <span class="comment">// 배열(객체) 생성</span></span><br><span class="line"><span class="comment">// 엔진이 다음과 같이 해석합니다.</span></span><br><span class="line"><span class="keyword">var</span> books = <span class="keyword">new</span> <span class="built_in">Array</span>(<span class="string">'html'</span>, <span class="string">'css'</span>, <span class="string">'js'</span>);         <span class="comment">// 배열(객체) 생성</span></span><br></pre></td></tr></table></figure></p>
<p>이제 <code>객체(object)는 함수(function)로부터 시작된다</code>라는 것을 알 수 있습니다.</p>
<hr>
<p><span id="3"></span></p>
<h2 id="함수function-생성시-발생하는-일"><a href="#함수-function-생성시-발생하는-일" class="headerlink" title=" 함수(function) 생성시 발생하는 일"></a><span style="color:red"> 함수(function) 생성시 발생하는 일</span></h2><p>객체(object)는 함수(function)로부터 시작되기 때문에 사용자가 객체를 생성하기 위해 먼저 함수를 정의하게 됩니다. 이때 <strong>발생하는 일</strong>에 대해 알아보겠습니다. 여기서는 2가지를 기억해야 합니다.</p>
<p>1.<strong>함수를 정의하면 함수가 생성되며 <code>Prototype object</code>가 같이 생성 됩니다. 생성된 Prototype object는 함수의 <code>prototype</code> 속성을 통해 접근할 수 있습니다.</strong> (Prototype object같은 경우 함수 생성시에만 됩니다. 일반 객체 생성시에는 생성되지 않습니다.)</p>
<p><img src="/images/post/2017-03-14/function_property.png" alt="함수 prototype property"></p>
<p>2.함수의 생성과 함께 생성된 <code>Prototype object</code>는 <code>constructor</code>와 <code>__proto__</code>를 갖고 있습니다. (cover property를 추가한것 처럼 사용자 임의로 추가 가능합니다.) <strong>constructor</strong>는 생성된 함수를 가리키며(여기서는 function Book을 가리킵니다.) <strong>__proto__</strong>는 <code>Prototype Link</code>로서 <strong>객체가 생성될 때 사용된 생성자(함수)의 Prototype object를 가리킵니다.</strong> Prototype Link는 뒤에서 자세하게 알아보겠습니다.</p>
<p><img src="/images/post/2017-03-14/prototype_object.png" alt="함수와 함께 생성된 Prototype object"></p>
<p>다이어그램을 통해 확인하면 다음과 같습니다.</p>
<p><img src="/images/post/2017-03-14/make_function_diagram.png" alt="함수와 Prototype object의 관계"></p>
<hr>
<p><span id="4"></span></p>
<h2 id="객체object-생성시-발생하는-일"><a href="#객체-object-생성시-발생하는-일" class="headerlink" title=" 객체(object) 생성시 발생하는 일"></a><span style="color:red"> 객체(object) 생성시 발생하는 일</span></h2><p>이번에는 객체 생성시 발생하는 일에 대해 알아보겠습니다. 조금 전에 정의한 Book 함수(생성자)를 사용하여 jsBook이라는 객체를 생성해 보겠습니다.</p>
<p><img src="/images/post/2017-03-14/make_object.png" alt="Book 함수로 생성한 객체"></p>
<p>생성자(함수)의 몸체 부분에 어떠한 코드도 작성하지 않았는데 이를 통해 생성한 jsBook 객체가 <code>__proto__</code>라는 프로퍼티를 갖고있습니다.</p>
<p>여기서 <strong>__proto__</strong> 는 <code>Prototype Link</code>로서 <strong>객체의 생성에 쓰인 생성자 함수의 <code>Prototype object</code></strong>를 가리키고 있습니다. 그렇기 때문에 Book 생성자 함수와 함께 생성된 Prototype object에 추가한 cover라는 프로퍼티가 보이는것을 확인할 수 있습니다.</p>
<p>조금 더 이해하기 쉽게 다이어그램으로 확인하면 다음과 같습니다.</p>
<p><img src="/images/post/2017-03-14/make_object_diagram.png" alt="함수, Prototype object, 객체의 관계"></p>
<p>다이어그램에서도 확인할 수 있다시피 <code>prototype</code> property(함수 생성시 함께 생성된 Prototype object를 가리킴)는 함수객체만 가지며 <code>__proto__</code>는 객체라면 모두 갖고 있습니다.</p>
<p>이제 프로토타입 체인(Prototype Chain)에 대해 이해할 수 있는 준비가 되었습니다.</p>
<hr>
<p><span id="5"></span></p>
<h2 id="프로토타입-체인prototype-chain"><a href="#프로토타입-체인-Prototype-Chain" class="headerlink" title=" 프로토타입 체인(Prototype Chain)"></a><span style="color:red"> 프로토타입 체인(Prototype Chain)</span></h2><p>결론부터 말씀드리면 <code>프로토타입 체인</code>은 객체의 property를 사용할때 해당 property가 없다면, <code>__proto__</code> property를 이용해 자신의 생성에 관여한 함수(생성자 함수)의 <code>Prototype object</code>에서 property를 찾습니다. 만약 Prototype object에도 해당 property가 없다면 다시 Prototype object의 <strong>__proto__</strong> property를 이용해 Prototype object에서 property를 찾습니다. 이렇게 계속 반복이 이루어지며 해당 property를 찾게 된다면 <strong>값을 반환</strong>하고 찾지 못한다면 <strong>undefined</strong>를 반환합니다. 이렇게 <strong><code>__proto__</code> property를 통해 상위 프로토타입과 연결되어 있는 형태를 프로토타입 체인(Chain)이라고 합니다.</strong></p>
<p>프로토타입 체인에 대해 알게되었으니 다시한번 처음 코드를 살펴보겠습니다.</p>
<p><img src="/images/post/2017-03-14/prototype_example_1.png" alt="프로토타입 체인 예제"></p>
<p>이제 어떻게 jsBook에 cover라는 property를 추가하지 않았는데도 결과가 출력되는지 이해할 수 있습니다. 다음과 같이 동작할 것입니다.</p>
<p><img src="/images/post/2017-03-14/prototype_diagram_1.png" alt="프로토타입 체인 예제(cover property 찾는 과정)"></p>
<p>또한 다음과 같이 <strong>프로토타입 체인의 최상위는 Object이기 때문에 Object.prototype의 property들을 모두 사용할 수 있습니다.</strong> 자주 사용하는 toString()과 valueOf() 모두 Object.prototype에 선언되어 있습니다.<br>(Book Prototype object는 <strong>객체</strong>이기 때문에 Object 생성자가 사용될 것입니다. 따라서 Book Prototype object의 <strong>__proto__</strong>는 Object Prototype object를 가리키게 됩니다.)</p>
<p><img src="/images/post/2017-03-14/prototype_diagram_2.png" alt="프로토타입 체인의 최상위 object"><br><img src="/images/post/2017-03-14/Object_prototype.png" alt="Object.prototype"></p>
<p><code>Prototype object</code>와 <code>__proto__</code> 그리고 <code>프로토타입 체인</code>에 대해 이해하였으니 다음과 같은 코드도 이해할 수 있습니다. 잘 이해가 되지 않는다면 위의 다이어그램을 참고해보시기 바랍니다.</p>
<p><img src="/images/post/2017-03-14/prototype_chain_test.png" alt="__proto__와 Prototype object의 관계"></p>
<hr>
<p><span id="6"></span></p>
<h2 id="번외"><a href="#번외" class="headerlink" title="번외"></a>번외</h2><p><img src="/images/post/2017-03-14/prototype_diagram_2_check.png" alt="프로토타입 체인의 최상위 object"><br>혹시 다이어그램을 보면서 function Book의 <strong>__proto__</strong> 는 무엇을 가리키고 있는지 궁금해 하셨을 분들을 위해 추적해보았습니다.</p>
<p><img src="/images/post/2017-03-14/function_proto.png" alt="function(생성자)의 __proto__ 추적"></p>
<p>다음 코드를 도식화 하면 다음과 같은 다이어그램이 나오게 됩니다.</p>
<p><img src="/images/post/2017-03-14/function_proto_diagram.png" alt="function(생성자)의 __proto__ 추적"></p>
<p>간단하게 포스팅을 하려했는데 주제가 주제인지라 길어졌습니다. 저도 프로토타입을 처음 공부하면서 어려움을 많이 겪었는데 조금이나마 도움이 되었으면 좋겠습니다.</p>

        </div>
        
        
        
    </div>
</div>









<!-- For Google Adsense -->
<script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
<ins class="adsbygoogle" style="display:block; text-align:center;" data-ad-layout="in-article" data-ad-format="fluid" data-ad-client="ca-pub-3921438651818825" data-ad-slot="3015269677"></ins>
<script>
  (adsbygoogle = window.adsbygoogle || []).push({});
</script>



    
<div class="card card-transparent">
    <nav class="pagination is-centered" role="navigation" aria-label="pagination">
        <div class="pagination-previous">
            <a class="is-flex-grow has-text-black-ter" href="/archives/16/">이전</a>
        </div>
        <div class="pagination-next">
            <a class="is-flex-grow has-text-black-ter" href="/archives/18/">다음</a>
        </div>
        <ul class="pagination-list is-hidden-mobile">
            
            <li><a class="pagination-link has-text-black-ter" href="/">1</a></li>
            
            <li><span class="pagination-ellipsis has-text-black-ter">&hellip;</span></li>
            
            <li><a class="pagination-link has-text-black-ter" href="/archives/16/">16</a></li>
            
            <li><a class="pagination-link is-current" href="/archives/17/">17</a></li>
            
            <li><a class="pagination-link has-text-black-ter" href="/archives/18/">18</a></li>
            
            <li><span class="pagination-ellipsis has-text-black-ter">&hellip;</span></li>
            
            <li><a class="pagination-link has-text-black-ter" href="/archives/21/">21</a></li>
            
        </ul>
    </nav>
</div>
</div>
                




<div class="column is-4-tablet is-4-desktop is-3-widescreen  has-order-1 column-left ">
    
        
<div class="card widget">
    <div class="card-content">
        <nav class="level">
            <div class="level-item has-text-centered" style="flex-shrink: 1">
                <div>
                    
                    <figure class="image is-128x128 has-mb-6">
                        <img class="is-rounded" src="/images/avatar.jpeg" alt="JongMin">
                    </figure>
                    
                    <p class="is-size-4 is-block">
                        JongMin
                    </p>
                    
                    
                    <p class="is-size-6 is-block">
                        생각을 기록하자
                    </p>
                    
                    
                </div>
            </div>
        </nav>
        <nav class="level is-mobile">
            <div class="level-item has-text-centered is-marginless">
                <div>
                    <p class="heading">
                        포스트
                    </p>
                    <a href="/archives">
                        <p class="title has-text-weight-normal">
                            124
                        </p>
                    </a>
                </div>
            </div>
            <div class="level-item has-text-centered is-marginless">
                <div>
                    <p class="heading">
                        카테고리
                    </p>
                    <a href="/categories">
                        <p class="title has-text-weight-normal">
                            22
                        </p>
                    </a>
                </div>
            </div>
            <div class="level-item has-text-centered is-marginless">
                <div>
                    <p class="heading">
                        태그
                    </p>
                    <a href="/tags">
                        <p class="title has-text-weight-normal">
                            203
                        </p>
                    </a>
                </div>
            </div>
        </nav>
        
        <div class="level">
            <a class="level-item button is-link is-rounded" href="https://github.com/jongmin92" target="_blank" rel="external nofollow noopener noreferrer">
                팔로우</a>
        </div>
        
        
        
        <div class="level is-mobile">
            
            <a class="level-item button is-white is-marginless" target="_blank" rel="external nofollow noopener noreferrer" title="Github" href="https://github.com/jongmin92">
                
                <i class="fab fa-github"></i>
                
            </a>
            
            <a class="level-item button is-white is-marginless" target="_blank" rel="external nofollow noopener noreferrer" title="Facebook" href="https://www.facebook.com/jongmin.kim.7796420">
                
                <i class="fab fa-facebook"></i>
                
            </a>
            
            <a class="level-item button is-white is-marginless" target="_blank" rel="noopener" title="RSS" href="/">
                
                <i class="fas fa-rss"></i>
                
            </a>
            
        </div>
        
    </div>
</div>
    
        <div class="card widget">
    <div class="card-content">
        <h3 class="menu-label">
            최근 글
        </h3>
        
        <article class="media">
            
            <a href="/2020/03/31/Java/use-assertthat/" class="media-left">
                <p class="image is-64x64">
                    <img class="thumbnail" src="/images/thumbnail.svg" alt="Unit Test에서 AssertThat을 사용하자">
                </p>
            </a>
            
            <div class="media-content">
                <div class="content">
                    <div><time class="has-text-grey is-size-7 is-uppercase" datetime="2020-03-30T15:44:27.000Z">2020-03-31</time></div>
                    <a href="/2020/03/31/Java/use-assertthat/" class="title has-link-black-ter is-size-6 has-text-weight-normal">Unit Test에서 AssertThat을 사용하자</a>
                    <p class="is-size-7 is-uppercase">
                        <a class="has-link-grey -link" href="/categories/Java/">Java</a>
                    </p>
                </div>
            </div>
        </article>
        
        <article class="media">
            
            <a href="/2020/01/02/Java/rsa/" class="media-left">
                <p class="image is-64x64">
                    <img class="thumbnail" src="/images/thumbnail.svg" alt="Encryption - RSA">
                </p>
            </a>
            
            <div class="media-content">
                <div class="content">
                    <div><time class="has-text-grey is-size-7 is-uppercase" datetime="2020-01-02T13:29:00.000Z">2020-01-02</time></div>
                    <a href="/2020/01/02/Java/rsa/" class="title has-link-black-ter is-size-6 has-text-weight-normal">Encryption - RSA</a>
                    <p class="is-size-7 is-uppercase">
                        <a class="has-link-grey -link" href="/categories/Programming/">Programming</a> / <a class="has-link-grey -link" href="/categories/Programming/Java/">Java</a>
                    </p>
                </div>
            </div>
        </article>
        
        <article class="media">
            
            <a href="/2019/12/26/Programming/2019-retrospect/" class="media-left">
                <p class="image is-64x64">
                    <img class="thumbnail" src="/images/thumbnail.svg" alt="2년차 LINE 서버 개발자의 2019년 회고">
                </p>
            </a>
            
            <div class="media-content">
                <div class="content">
                    <div><time class="has-text-grey is-size-7 is-uppercase" datetime="2019-12-26T13:23:00.000Z">2019-12-26</time></div>
                    <a href="/2019/12/26/Programming/2019-retrospect/" class="title has-link-black-ter is-size-6 has-text-weight-normal">2년차 LINE 서버 개발자의 2019년 회고</a>
                    <p class="is-size-7 is-uppercase">
                        <a class="has-link-grey -link" href="/categories/Programming/">Programming</a>
                    </p>
                </div>
            </div>
        </article>
        
        <article class="media">
            
            <a href="/2019/12/23/Programming/hmac/" class="media-left">
                <p class="image is-64x64">
                    <img class="thumbnail" src="/images/thumbnail.svg" alt="HMAC을 이용한 무결성 보장">
                </p>
            </a>
            
            <div class="media-content">
                <div class="content">
                    <div><time class="has-text-grey is-size-7 is-uppercase" datetime="2019-12-23T14:37:00.000Z">2019-12-23</time></div>
                    <a href="/2019/12/23/Programming/hmac/" class="title has-link-black-ter is-size-6 has-text-weight-normal">HMAC을 이용한 무결성 보장</a>
                    <p class="is-size-7 is-uppercase">
                        <a class="has-link-grey -link" href="/categories/Programming/">Programming</a>
                    </p>
                </div>
            </div>
        </article>
        
        <article class="media">
            
            <a href="/2019/12/18/Java/hash/" class="media-left">
                <p class="image is-64x64">
                    <img class="thumbnail" src="/images/thumbnail.svg" alt="Hash - MD5와 SHA256">
                </p>
            </a>
            
            <div class="media-content">
                <div class="content">
                    <div><time class="has-text-grey is-size-7 is-uppercase" datetime="2019-12-17T15:23:00.000Z">2019-12-18</time></div>
                    <a href="/2019/12/18/Java/hash/" class="title has-link-black-ter is-size-6 has-text-weight-normal">Hash - MD5와 SHA256</a>
                    <p class="is-size-7 is-uppercase">
                        <a class="has-link-grey -link" href="/categories/Programming/">Programming</a> / <a class="has-link-grey -link" href="/categories/Programming/Java/">Java</a>
                    </p>
                </div>
            </div>
        </article>
        
    </div>
</div>
    
        
<div class="card widget">
    <div class="card-content">
        <div class="menu">
            <h3 class="menu-label">
                카테고리
            </h3>
            <ul class="menu-list">
            <li>
        <a class="level is-marginless" href="/categories/Algorithm/">
            <span class="level-start">
                <span class="level-item">Algorithm</span>
            </span>
            <span class="level-end">
                <span class="level-item tag">14</span>
            </span>
        </a><ul><li>
        <a class="level is-marginless" href="/categories/Algorithm/BOJ/">
            <span class="level-start">
                <span class="level-item">BOJ</span>
            </span>
            <span class="level-end">
                <span class="level-item tag">6</span>
            </span>
        </a></li><li>
        <a class="level is-marginless" href="/categories/Algorithm/Concept/">
            <span class="level-start">
                <span class="level-item">Concept</span>
            </span>
            <span class="level-end">
                <span class="level-item tag">8</span>
            </span>
        </a></li></ul></li><li>
        <a class="level is-marginless" href="/categories/Book/">
            <span class="level-start">
                <span class="level-item">Book</span>
            </span>
            <span class="level-end">
                <span class="level-item tag">3</span>
            </span>
        </a></li><li>
        <a class="level is-marginless" href="/categories/Database/">
            <span class="level-start">
                <span class="level-item">Database</span>
            </span>
            <span class="level-end">
                <span class="level-item tag">1</span>
            </span>
        </a></li><li>
        <a class="level is-marginless" href="/categories/Java/">
            <span class="level-start">
                <span class="level-item">Java</span>
            </span>
            <span class="level-end">
                <span class="level-item tag">1</span>
            </span>
        </a></li><li>
        <a class="level is-marginless" href="/categories/Programming/">
            <span class="level-start">
                <span class="level-item">Programming</span>
            </span>
            <span class="level-end">
                <span class="level-item tag">95</span>
            </span>
        </a><ul><li>
        <a class="level is-marginless" href="/categories/Programming/AWS/">
            <span class="level-start">
                <span class="level-item">AWS</span>
            </span>
            <span class="level-end">
                <span class="level-item tag">1</span>
            </span>
        </a></li><li>
        <a class="level is-marginless" href="/categories/Programming/Git/">
            <span class="level-start">
                <span class="level-item">Git</span>
            </span>
            <span class="level-end">
                <span class="level-item tag">1</span>
            </span>
        </a></li><li>
        <a class="level is-marginless" href="/categories/Programming/Gradle/">
            <span class="level-start">
                <span class="level-item">Gradle</span>
            </span>
            <span class="level-end">
                <span class="level-item tag">2</span>
            </span>
        </a></li><li>
        <a class="level is-marginless" href="/categories/Programming/HTML/">
            <span class="level-start">
                <span class="level-item">HTML</span>
            </span>
            <span class="level-end">
                <span class="level-item tag">1</span>
            </span>
        </a></li><li>
        <a class="level is-marginless" href="/categories/Programming/Java/">
            <span class="level-start">
                <span class="level-item">Java</span>
            </span>
            <span class="level-end">
                <span class="level-item tag">21</span>
            </span>
        </a></li><li>
        <a class="level is-marginless" href="/categories/Programming/JavaScript/">
            <span class="level-start">
                <span class="level-item">JavaScript</span>
            </span>
            <span class="level-end">
                <span class="level-item tag">15</span>
            </span>
        </a></li><li>
        <a class="level is-marginless" href="/categories/Programming/Linux-Ubuntu/">
            <span class="level-start">
                <span class="level-item">Linux & Ubuntu</span>
            </span>
            <span class="level-end">
                <span class="level-item tag">5</span>
            </span>
        </a></li><li>
        <a class="level is-marginless" href="/categories/Programming/Node/">
            <span class="level-start">
                <span class="level-item">Node</span>
            </span>
            <span class="level-end">
                <span class="level-item tag">5</span>
            </span>
        </a></li><li>
        <a class="level is-marginless" href="/categories/Programming/RaspberryPi/">
            <span class="level-start">
                <span class="level-item">RaspberryPi</span>
            </span>
            <span class="level-end">
                <span class="level-item tag">8</span>
            </span>
        </a></li><li>
        <a class="level is-marginless" href="/categories/Programming/React-Native/">
            <span class="level-start">
                <span class="level-item">React Native</span>
            </span>
            <span class="level-end">
                <span class="level-item tag">4</span>
            </span>
        </a></li><li>
        <a class="level is-marginless" href="/categories/Programming/Spring/">
            <span class="level-start">
                <span class="level-item">Spring</span>
            </span>
            <span class="level-end">
                <span class="level-item tag">19</span>
            </span>
        </a></li><li>
        <a class="level is-marginless" href="/categories/Programming/Tool/">
            <span class="level-start">
                <span class="level-item">Tool</span>
            </span>
            <span class="level-end">
                <span class="level-item tag">4</span>
            </span>
        </a></li></ul></li><li>
        <a class="level is-marginless" href="/categories/Project/">
            <span class="level-start">
                <span class="level-item">Project</span>
            </span>
            <span class="level-end">
                <span class="level-item tag">6</span>
            </span>
        </a><ul><li>
        <a class="level is-marginless" href="/categories/Project/Emily/">
            <span class="level-start">
                <span class="level-item">Emily</span>
            </span>
            <span class="level-end">
                <span class="level-item tag">6</span>
            </span>
        </a></li></ul></li><li>
        <a class="level is-marginless" href="/categories/Tip/">
            <span class="level-start">
                <span class="level-item">Tip</span>
            </span>
            <span class="level-end">
                <span class="level-item tag">3</span>
            </span>
        </a></li>
            </ul>
        </div>
    </div>
</div>
    
    
        <div class="column-right-shadow is-hidden-widescreen ">
        
        </div>
    
</div>

                
            </div>
        </div>
    </section>
    <footer class="footer">
    <div class="container">
        <div class="level">
            <div class="level-start has-text-centered-mobile">
                <a class="footer-logo is-block has-mb-6" href="/">
                
                    <img src="/images/logo.png" alt="92Hz" height="28">
                
                </a>
                <p class="is-size-7">
                &copy; 2020 KimJongMin&nbsp;
                Powered by <a href="https://hexo.io/" target="_blank" rel="external nofollow noopener noreferrer">Hexo</a> & <a href="https://github.com/ppoffice/hexo-theme-icarus" target="_blank" rel="external nofollow noopener noreferrer">Icarus</a>
                
                </p>
            </div>
            <div class="level-end">
            
                <div class="field has-addons is-flex-center-mobile has-mt-5-mobile is-flex-wrap is-flex-middle">
                
                <p class="control">
                    <a class="button is-white is-large" target="_blank" rel="external nofollow noopener noreferrer" title="Creative Commons" href="https://creativecommons.org/">
                        
                        <i class="fab fa-creative-commons"></i>
                        
                    </a>
                </p>
                
                <p class="control">
                    <a class="button is-white is-large" target="_blank" rel="external nofollow noopener noreferrer" title="Attribution 4.0 International" href="https://creativecommons.org/licenses/by/4.0/">
                        
                        <i class="fab fa-creative-commons-by"></i>
                        
                    </a>
                </p>
                
                <p class="control">
                    <a class="button is-white is-large" target="_blank" rel="external nofollow noopener noreferrer" title="Download on GitHub" href="https://github.com/ppoffice/hexo-theme-icarus">
                        
                        <i class="fab fa-github"></i>
                        
                    </a>
                </p>
                
                </div>
            
            </div>
        </div>
    </div>
</footer>
    <script src="https://cdn.jsdelivr.net/npm/jquery@3.3.1/dist/jquery.min.js"></script>
<script src="https://cdn.jsdelivr.net/npm/moment@2.22.2/min/moment-with-locales.min.js"></script>
<script>moment.locale("ko");</script>


<script>
var IcarusThemeSettings = {
    site: {
        url: 'https://jongmin92.github.io',
        external_link: {"enable":true,"exclude":[]}
    },
    article: {
        highlight: {
            clipboard: true,
            fold: 'unfolded'
        }
    }
};
</script>


<script src="https://cdn.jsdelivr.net/npm/clipboard@2.0.4/dist/clipboard.min.js" defer></script>





<script src="/js/animation.js"></script>



<script src="https://cdn.jsdelivr.net/npm/lightgallery@1.6.8/dist/js/lightgallery.min.js" defer></script>
<script src="https://cdn.jsdelivr.net/npm/justifiedGallery@3.7.0/dist/js/jquery.justifiedGallery.min.js" defer></script>
<script src="/js/gallery.js" defer></script>



<div id="outdated">
    <h6>Your browser is out-of-date!</h6>
    <p>Update your browser to view this website correctly. <a id="btnUpdateBrowser" href="http://outdatedbrowser.com/" rel="external nofollow noopener noreferrer" target="_blank">Update
            my browser now </a></p>
    <p class="last"><a href="#" id="btnCloseUpdateBrowser" title="Close">&times;</a></p>
</div>
<script src="https://cdn.jsdelivr.net/npm/outdatedbrowser@1.1.5/outdatedbrowser/outdatedbrowser.min.js" defer></script>
<script>
    document.addEventListener("DOMContentLoaded", function () {
        outdatedBrowser({
            bgColor: '#f25648',
            color: '#ffffff',
            lowerThan: 'flex'
        });
    });
</script>


<script src="https://cdn.jsdelivr.net/npm/mathjax@2.7.5/unpacked/MathJax.js?config=TeX-MML-AM_CHTML" defer></script>
<script>
document.addEventListener('DOMContentLoaded', function () {
    MathJax.Hub.Config({
        'HTML-CSS': {
            matchFontHeight: false
        },
        SVG: {
            matchFontHeight: false
        },
        CommonHTML: {
            matchFontHeight: false
        },
        tex2jax: {
            inlineMath: [
                ['$','$'],
                ['\\(','\\)']
            ]
        }
    });
});
</script>


<a id="back-to-top" title="Back to Top" href="javascript:;">
    <i class="fas fa-chevron-up"></i>
</a>
<script src="/js/back-to-top.js" defer></script>














<script src="/js/main.js" defer></script>

    
    <div class="searchbox ins-search">
    <div class="searchbox-container ins-search-container">
        <div class="searchbox-input-wrapper">
            <input type="text" class="searchbox-input ins-search-input" placeholder="입력 하세요...">
            <span class="searchbox-close ins-close ins-selectable"><i class="fa fa-times-circle"></i></span>
        </div>
        <div class="searchbox-result-wrapper ins-section-wrapper">
            <div class="ins-section-container"></div>
        </div>
    </div>
</div>
<script>
    (function (window) {
        var INSIGHT_CONFIG = {
            TRANSLATION: {
                POSTS: '포스트',
                PAGES: '페이지',
                CATEGORIES: '카테고리',
                TAGS: '태그',
                UNTITLED: '(제목없음)',
            },
            CONTENT_URL: '/content.json',
        };
        window.INSIGHT_CONFIG = INSIGHT_CONFIG;
    })(window);
</script>
<script src="/js/insight.js" defer></script>
<link rel="stylesheet" href="/css/search.css">
<link rel="stylesheet" href="/css/insight.css">
    
</body>
</html>